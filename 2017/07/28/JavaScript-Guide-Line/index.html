<!doctype html>



  


<html class="theme-next muse use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.1" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="JavaScript,Check Style,Guide Line," />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.1" />






<meta name="description" content="JavaScript(ES6) 开发规范
目录
类型
引用
对象
数组
解构
字符串
函数
箭头函数
类和构造函数
模块
迭代器和生成器
属性
变量
提升
比较操作符和相等
块
控制语句
注释
空白
逗号
分号
类型转换和强制转换
命名规则
访问器
事件
参考


类型
1.1 基础类型：当使用基础类型时，实际上是直接访问它的值。

string
booean
number
null
undefi">
<meta property="og:type" content="article">
<meta property="og:title" content="JavaScript-Guide-Line">
<meta property="og:url" content="http://riverage.github.io/2017/07/28/JavaScript-Guide-Line/index.html">
<meta property="og:site_name" content="RIMOU">
<meta property="og:description" content="JavaScript(ES6) 开发规范
目录
类型
引用
对象
数组
解构
字符串
函数
箭头函数
类和构造函数
模块
迭代器和生成器
属性
变量
提升
比较操作符和相等
块
控制语句
注释
空白
逗号
分号
类型转换和强制转换
命名规则
访问器
事件
参考


类型
1.1 基础类型：当使用基础类型时，实际上是直接访问它的值。

string
booean
number
null
undefi">
<meta property="og:updated_time" content="2017-07-28T14:16:57.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="JavaScript-Guide-Line">
<meta name="twitter:description" content="JavaScript(ES6) 开发规范
目录
类型
引用
对象
数组
解构
字符串
函数
箭头函数
类和构造函数
模块
迭代器和生成器
属性
变量
提升
比较操作符和相等
块
控制语句
注释
空白
逗号
分号
类型转换和强制转换
命名规则
访问器
事件
参考


类型
1.1 基础类型：当使用基础类型时，实际上是直接访问它的值。

string
booean
number
null
undefi">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    sidebar: {"position":"left","display":"post","offset":12,"offset_float":0,"b2t":false,"scrollpercent":false},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://riverage.github.io/2017/07/28/JavaScript-Guide-Line/"/>





  <title>JavaScript-Guide-Line | RIMOU</title>
  














</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">RIMOU</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://riverage.github.io/2017/07/28/JavaScript-Guide-Line/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="梦">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="RIMOU">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">JavaScript-Guide-Line</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-07-28T22:10:28+08:00">
                2017-07-28
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        <h1 id="JavaScript-ES6-开发规范"><a href="#JavaScript-ES6-开发规范" class="headerlink" title="JavaScript(ES6) 开发规范"></a>JavaScript(ES6) 开发规范</h1><p><a name="toc"></a></p>
<h2 id="目录"><a href="#目录" class="headerlink" title="目录"></a>目录</h2><ol>
<li><a href="#types">类型</a></li>
<li><a href="#references">引用</a></li>
<li><a href="#objects">对象</a></li>
<li><a href="#arrays">数组</a></li>
<li><a href="#destructuring">解构</a></li>
<li><a href="#strings">字符串</a></li>
<li><a href="#functions">函数</a></li>
<li><a href="#arrow-functions">箭头函数</a></li>
<li><a href="#classes--constructors">类和构造函数</a></li>
<li><a href="#modules">模块</a></li>
<li><a href="#iterators-and-generators">迭代器和生成器</a></li>
<li><a href="#properties">属性</a></li>
<li><a href="#variables">变量</a></li>
<li><a href="#hoisting">提升</a></li>
<li><a href="#comparison-operators--equality">比较操作符和相等</a></li>
<li><a href="#blocks">块</a></li>
<li><a href="#control-statements">控制语句</a></li>
<li><a href="#comments">注释</a></li>
<li><a href="#whitespace">空白</a></li>
<li><a href="#commas">逗号</a></li>
<li><a href="#semicolons">分号</a></li>
<li><a href="#type-casting--coercion">类型转换和强制转换</a></li>
<li><a href="#naming-conventions">命名规则</a></li>
<li><a href="#accessors">访问器</a></li>
<li><a href="#events">事件</a></li>
<li><a href="#resources">参考</a></li>
</ol>
<p><a name="types"></a></p>
<h2 id="类型"><a href="#类型" class="headerlink" title="类型"></a>类型</h2><ul>
<li><p>1.1 <strong>基础类型</strong>：当使用基础类型时，实际上是直接访问它的值。</p>
<ul>
<li><code>string</code></li>
<li><code>booean</code></li>
<li><code>number</code></li>
<li><code>null</code></li>
<li><code>undefined</code></li>
</ul>
</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> foo = <span class="number">1</span></div><div class="line"><span class="keyword">let</span> bar = fooo</div><div class="line"></div><div class="line">bar = <span class="number">9</span></div><div class="line"></div><div class="line"><span class="built_in">console</span>.log(foo, bar) <span class="comment">// =&gt; 1, 9</span></div></pre></td></tr></table></figure>
<ul>
<li><p>1.2 <strong>复杂类型</strong>：当使用复杂类型时，实际上是通过它的引用访问到其值的。</p>
<ul>
<li><code>object</code></li>
<li><code>array</code></li>
<li><code>function</code></li>
</ul>
</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> foo = [<span class="number">1</span>, <span class="number">2</span>]</div><div class="line"><span class="keyword">const</span> bar = foo</div><div class="line"></div><div class="line">bar[<span class="number">0</span>] = <span class="number">9</span></div><div class="line"></div><div class="line"><span class="built_in">console</span>.log(foo[<span class="number">0</span>], bar[<span class="number">0</span>]) =&gt; <span class="number">9</span>,<span class="number">9</span></div></pre></td></tr></table></figure>
<p><a href="#toc">目录</a><br><a name="references"></a></p>
<h2 id="引用"><a href="#引用" class="headerlink" title="引用"></a>引用</h2><ul>
<li>2.1 使用 <code>const</code> 修饰所有的常量数据，禁止使用 <code>var</code> 。eslint:<a href="http://eslint.org/docs/rules/prefer-const.html" target="_blank" rel="external"><code>prefre-const</code></a>, <a href="http://eslint.org/docs/rules/no-const-assign.html" target="_blank" rel="external"><code>no-const-assign</code></a></li>
</ul>
<blockquote>
<p>使用const 可以确保引用的值不会被再度赋值，从而使降低代码 bug 率。</p>
</blockquote>
 <figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="keyword">var</span> a = <span class="number">1</span></div><div class="line"><span class="keyword">var</span> b = <span class="number">2</span></div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line"><span class="keyword">const</span> a = <span class="number">1</span></div><div class="line"><span class="keyword">const</span> b = <span class="number">2</span></div></pre></td></tr></table></figure>
<ul>
<li>2.2 如果需要重新给变量赋值，使用 <code>let</code> 替代 <code>var</code> 。eslint：<a href="http://eslint.org/docs/rules/no-var.html" target="_blank" rel="external"><code>no-var</code></a></li>
</ul>
<blockquote>
<p><code>let</code> 是块级的变量修饰符关键字，而 <code>var</code> 是函数级的关键字。</p>
</blockquote>
<ul>
<li>2.3 <code>let</code> 与 <code>const</code> 同属于块级的修饰符关键字。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// const 和 let 只存在于他们所被定义的块中。</span></div><div class="line">&#123;</div><div class="line">	<span class="keyword">let</span> a = <span class="number">1</span></div><div class="line">	<span class="keyword">const</span> b = <span class="number">2</span></div><div class="line">&#125;</div><div class="line"><span class="built_in">console</span>.log(a) <span class="comment">// ReferenceError</span></div><div class="line"><span class="built_in">console</span>.log(b) <span class="comment">// ReferenceError</span></div></pre></td></tr></table></figure>
<p><a href="#toc">目录</a><br><a name="objects"></a></p>
<h2 id="对象"><a href="#对象" class="headerlink" title="对象"></a>对象</h2><ul>
<li>3.1 使用字面量创建对象。eslint：<a href="http://eslint.org/docs/rules/no-new-object.html" target="_blank" rel="external"><code>no-new-object</code></a></li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="keyword">const</span> item = <span class="keyword">new</span> <span class="built_in">Object</span>()</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line"><span class="keyword">const</span> item = &#123;&#125;</div></pre></td></tr></table></figure>
<ul>
<li>3.2 当使用动态属性创建对象时，使用已经计算好的属性值。</li>
</ul>
<blockquote>
<p>这样可以将对象的属性在同一处被定义出来</p>
<p>使用 TypeScript 的 <code>interface</code> 可以为特定的对象定义结构。</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">getKey</span>(<span class="params">key</span>) </span>&#123;</div><div class="line">	<span class="keyword">return</span> <span class="string">`a key named <span class="subst">$&#123;ke&#125;</span>`</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="keyword">const</span> obj = &#123;</div><div class="line">	int <span class="number">5</span>,</div><div class="line">	<span class="attr">name</span>: <span class="string">'San Francisco'</span></div><div class="line">&#125;</div><div class="line">obj[getKey(<span class="string">'eanbled'</span>)] = <span class="literal">true</span></div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line"><span class="keyword">const</span> obj = &#123;</div><div class="line">	<span class="attr">id</span>: <span class="number">5</span>,</div><div class="line">	<span class="attr">name</span>: <span class="string">'San Francisco'</span>,</div><div class="line">	[getKey(<span class="string">'enabled'</span>)]: <span class="literal">true</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>3.3 使用对象方法的简写语法。eslint：<a href="http://eslint.org/docs/rules/object-shorthand.html" target="_blank" rel="external"><code>object-shorthand</code></a></li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="keyword">const</span> atom = &#123;</div><div class="line">	<span class="attr">value</span>: <span class="number">1</span>,</div><div class="line">	</div><div class="line">	<span class="attr">addValue</span>: <span class="function"><span class="keyword">function</span>(<span class="params">value</span>) </span>&#123;</div><div class="line">		<span class="keyword">return</span> atom.value + value</div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line"><span class="keyword">const</span> atom = &#123;</div><div class="line">	<span class="attr">value</span>: <span class="number">1</span>,</div><div class="line">	</div><div class="line">	addValue(value) &#123;</div><div class="line">		<span class="keyword">return</span> aomt.value + value</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>3.4 使用属性值的简写语法。 eslint： <a href="http://eslint.org/docs/rules/object-shorthand.html" target="_blank" rel="external"><code>object-shorthand</code></a> </li>
</ul>
<blockquote>
<p>描述该对象可以更加简短。</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> lukeSkywalker = <span class="string">'Luke Skywalker'</span></div><div class="line"></div><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="keyword">const</span> obj = &#123;</div><div class="line">	<span class="attr">lukeSkywalker</span>: lukeSkywalker</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line"><span class="keyword">const</span> obj = &#123;</div><div class="line">	lukeSkywalker</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>3.5 在对象的定义的开始位置分组简写的属性。</li>
</ul>
<blockquote>
<p>这可以很清楚的确认那些值使用了简写语法。</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"> <span class="keyword">const</span> anakinSkywalker = <span class="string">'Anakin Skywalker'</span></div><div class="line"> <span class="keyword">const</span> lukeSkywalker = <span class="string">'Luke Skywalker'</span></div><div class="line"></div><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="keyword">const</span> obj = &#123;</div><div class="line">	<span class="attr">episodeOne</span>: <span class="number">1</span>,</div><div class="line">	<span class="attr">twoJediWalkIntoACantina</span>: <span class="number">2</span>,</div><div class="line">	lukeSkywalker,</div><div class="line">	<span class="attr">episodeThree</span>: <span class="number">3</span>,</div><div class="line">	<span class="attr">mayTheFourth</span>: <span class="number">4</span>,</div><div class="line">	anakinSkywalker</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line"><span class="keyword">const</span> obj = &#123;</div><div class="line">	lukeSkywalker,</div><div class="line">	anakinSkywalker,</div><div class="line">	<span class="attr">episodeOne</span>: <span class="number">1</span>,</div><div class="line">	<span class="attr">twoJediWalkIntoACantina</span>: <span class="number">2</span>,</div><div class="line">	<span class="attr">episodeThree</span>: <span class="number">3</span>,</div><div class="line">	<span class="attr">mayTheFourth</span>: <span class="number">4</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>3.6 只对非法的标志符使用引号。eslint：<a href="http://eslint.org/docs/rules/quote-props.html" target="_blank" rel="external"><code>quote-props</code></a></li>
</ul>
<blockquote>
<p>一般而言我们主观的认为使用该方法更加易读。在更加有利于代码高亮的同时，很多可以更加容易的被JS引擎优化。</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="keyword">const</span> bad = &#123;</div><div class="line">  <span class="string">'foo'</span>: <span class="number">3</span>,</div><div class="line">  <span class="string">'bar'</span>: <span class="number">4</span>,</div><div class="line">  <span class="string">'data-blah'</span>: <span class="number">5</span>,</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line"><span class="keyword">const</span> good = &#123;</div><div class="line">  <span class="attr">foo</span>: <span class="number">3</span>,</div><div class="line">  <span class="attr">bar</span>: <span class="number">4</span>,</div><div class="line">  <span class="string">'data-blah'</span>: <span class="number">5</span>,</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>3.7 像 <code>hasOwnProperty</code>，<code>propertyIsEnumerable</code>，<code>isPrototyeOf</code>，不能直接调用 <code>Object.prototye</code>。</li>
</ul>
<blockquote>
<p>这些方法有可能在对象上被其属性所遮盖。例如：<code>{hasOwnProperty: false}</code>，或该对象的原型链为空(<code>Ojbect.create(null)</code>)。</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="built_in">console</span>.log(object.hasOwnProperty(key))</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span>.prototype.hasOwnProperty.call(object, key))</div><div class="line"></div><div class="line"><span class="comment">// best</span></div><div class="line"><span class="keyword">const</span> has = <span class="built_in">Object</span>.prototype.hasOwnProperty <span class="comment">// cache the lookup once, in module scope.</span></div><div class="line"><span class="comment">/* or */</span></div><div class="line"><span class="keyword">import</span> has <span class="keyword">from</span> <span class="string">'has'</span></div><div class="line"><span class="comment">// ...</span></div><div class="line"><span class="built_in">console</span>.log(has.call(object, key))</div></pre></td></tr></table></figure>
<ul>
<li>3.8 对象浅拷贝是使用对象的扩展操作符代替 <code>Object.assign</code>。使用剩余操作符在省略特定对象的条件相生成一个新的对象。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"> <span class="comment">// very bad</span></div><div class="line"><span class="keyword">const</span> original = &#123; <span class="attr">a</span>: <span class="number">1</span>, <span class="attr">b</span>: <span class="number">2</span> &#125;</div><div class="line"><span class="keyword">const</span> copy = <span class="built_in">Object</span>.assign(original, &#123; <span class="attr">c</span>: <span class="number">3</span> &#125;) <span class="comment">// this mutates `original` ಠ_ಠ</span></div><div class="line"><span class="keyword">delete</span> copy.a <span class="comment">// so does this</span></div><div class="line"></div><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="keyword">const</span> original = &#123; <span class="attr">a</span>: <span class="number">1</span>, <span class="attr">b</span>: <span class="number">2</span> &#125;</div><div class="line"><span class="keyword">const</span> copy = <span class="built_in">Object</span>.assign(&#123;&#125;, original, &#123; <span class="attr">c</span>: <span class="number">3</span> &#125;) <span class="comment">// copy =&gt; &#123; a: 1, b: 2, c: 3 &#125;</span></div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line"><span class="keyword">const</span> original = &#123; <span class="attr">a</span>: <span class="number">1</span>, <span class="attr">b</span>: <span class="number">2</span> &#125;</div><div class="line"><span class="keyword">const</span> copy = &#123; ...original, <span class="attr">c</span>: <span class="number">3</span> &#125; <span class="comment">// copy =&gt; &#123; a: 1, b: 2, c: 3 &#125;</span></div><div class="line"></div><div class="line"><span class="keyword">const</span> &#123; a, ...noA &#125; = copy <span class="comment">// noA =&gt; &#123; b: 2, c: 3 &#125;</span></div></pre></td></tr></table></figure>
<p><a href="#toc">目录</a><br><a name="arrays"></a></p>
<h2 id="数组"><a href="#数组" class="headerlink" title="数组"></a>数组</h2><ul>
<li>4.1 使用字面变量与法创建数组。eslint： <a href="http://eslint.org/docs/rules/no-array-constructor.html" target="_blank" rel="external"><code>no-array-constructor</code></a></li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="keyword">const</span> items = <span class="keyword">new</span> <span class="built_in">Array</span>()</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line"><span class="keyword">const</span> items = []</div></pre></td></tr></table></figure>
<ul>
<li>4.2 使用 <a href="https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Array/push" target="_blank" rel="external">Array#push</a> 而不是直接赋值的方式添加一个元素到数组中。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> someStack = []</div><div class="line"></div><div class="line"><span class="comment">// bad</span></div><div class="line">someStack[someStack.length] = <span class="string">'abracadabra'</span></div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line">someStack.push(<span class="string">'abracadabra'</span>)</div></pre></td></tr></table></figure>
<ul>
<li>4.3 使用扩展操作符<code>...</code>来拷贝一个数组。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="keyword">const</span> len = items.length</div><div class="line"><span class="keyword">const</span> itemsCopy = []</div><div class="line"><span class="keyword">let</span> i</div><div class="line"></div><div class="line"><span class="keyword">for</span> (i = <span class="number">0</span> i &lt; len i += <span class="number">1</span>) &#123;</div><div class="line">  itemsCopy[i] = items[i]</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line"><span class="keyword">const</span> itemsCopy = [...items]</div></pre></td></tr></table></figure>
<ul>
<li>4.4 使用 <a href="https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Array/from" target="_blank" rel="external">Array.from</a> 将一个类数组对象(array-like)转换为数组。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> foo = <span class="built_in">document</span>.querySelectorAll(<span class="string">'.foo'</span>)</div><div class="line"><span class="keyword">const</span> nodes = <span class="built_in">Array</span>.from(foo)</div></pre></td></tr></table></figure>
<ul>
<li>4.5 在数组回调方法中使用 return 语句。如果函数体只有单个无副作用的语句，则可以省略。参照 8.2 。eslint： <a href="http://eslint.org/docs/rules/array-callback-return" target="_blank" rel="external"><code>array-callback-return</code></a></li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div></pre></td><td class="code"><pre><div class="line"> <span class="comment">// good</span></div><div class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>].map(<span class="function">(<span class="params">x</span>) =&gt;</span> &#123;</div><div class="line">  <span class="keyword">const</span> y = x + <span class="number">1</span></div><div class="line">  <span class="keyword">return</span> x * y</div><div class="line">&#125;)</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>].map(<span class="function"><span class="params">x</span> =&gt;</span> x + <span class="number">1</span>)</div><div class="line"></div><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="keyword">const</span> flat = &#123;&#125;</div><div class="line">[[<span class="number">0</span>, <span class="number">1</span>], [<span class="number">2</span>, <span class="number">3</span>], [<span class="number">4</span>, <span class="number">5</span>]].reduce(<span class="function">(<span class="params">memo, item, index</span>) =&gt;</span> &#123;</div><div class="line">  <span class="keyword">const</span> flatten = memo.concat(item)</div><div class="line">  flat[index] = flatten</div><div class="line">&#125;)</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line"><span class="keyword">const</span> flat = &#123;&#125;</div><div class="line">[[<span class="number">0</span>, <span class="number">1</span>], [<span class="number">2</span>, <span class="number">3</span>], [<span class="number">4</span>, <span class="number">5</span>]].reduce(<span class="function">(<span class="params">memo, item, index</span>) =&gt;</span> &#123;</div><div class="line">  <span class="keyword">const</span> flatten = memo.concat(item)</div><div class="line">  flat[index] = flatten</div><div class="line">  <span class="keyword">return</span> flatten</div><div class="line">&#125;)</div><div class="line"></div><div class="line"><span class="comment">// bad</span></div><div class="line">inbox.filter(<span class="function">(<span class="params">msg</span>) =&gt;</span> &#123;</div><div class="line">  <span class="keyword">const</span> &#123; subject, author &#125; = msg</div><div class="line">  <span class="keyword">if</span> (subject === <span class="string">'Mockingbird'</span>) &#123;</div><div class="line">    <span class="keyword">return</span> author === <span class="string">'Harper Lee'</span></div><div class="line">  &#125; <span class="keyword">else</span> &#123;</div><div class="line">    <span class="keyword">return</span> <span class="literal">false</span></div><div class="line">  &#125;</div><div class="line">&#125;)</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line">inbox.filter(<span class="function">(<span class="params">msg</span>) =&gt;</span> &#123;</div><div class="line">  <span class="keyword">const</span> &#123; subject, author &#125; = msg</div><div class="line">  <span class="keyword">if</span> (subject === <span class="string">'Mockingbird'</span>) &#123;</div><div class="line">    <span class="keyword">return</span> author === <span class="string">'Harper Lee'</span></div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="keyword">return</span> <span class="literal">false</span></div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<ul>
<li>4.6 如果数组有多行，在括号的开始和结束的位置换行。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// bad</span></div><div class="line">  <span class="keyword">const</span> arr = [</div><div class="line">    [<span class="number">0</span>, <span class="number">1</span>], [<span class="number">2</span>, <span class="number">3</span>], [<span class="number">4</span>, <span class="number">5</span>],</div><div class="line">  ]</div><div class="line"></div><div class="line">  <span class="keyword">const</span> objectInArray = [&#123;</div><div class="line">    <span class="attr">id</span>: <span class="number">1</span>,</div><div class="line">  &#125;, &#123;</div><div class="line">    <span class="attr">id</span>: <span class="number">2</span>,</div><div class="line">  &#125;]</div><div class="line"></div><div class="line">  <span class="keyword">const</span> numberInArray = [</div><div class="line">    <span class="number">1</span>, <span class="number">2</span>,</div><div class="line">  ]</div><div class="line"></div><div class="line">  <span class="comment">// good</span></div><div class="line">  <span class="keyword">const</span> arr = [[<span class="number">0</span>, <span class="number">1</span>], [<span class="number">2</span>, <span class="number">3</span>], [<span class="number">4</span>, <span class="number">5</span>]]</div><div class="line"></div><div class="line">  <span class="keyword">const</span> objectInArray = [</div><div class="line">    &#123;</div><div class="line">      <span class="attr">id</span>: <span class="number">1</span>,</div><div class="line">    &#125;,</div><div class="line">    &#123;</div><div class="line">      <span class="attr">id</span>: <span class="number">2</span>,</div><div class="line">    &#125;,</div><div class="line">  ]</div><div class="line"></div><div class="line">  <span class="keyword">const</span> numberInArray = [</div><div class="line">    <span class="number">1</span>,</div><div class="line">    <span class="number">2</span>,</div><div class="line">  ]</div></pre></td></tr></table></figure>
<p><a href="#toc">目录</a><br><a name="destructuring"></a></p>
<h2 id="解构"><a href="#解构" class="headerlink" title="解构"></a>解构</h2><ul>
<li>5.1 当访问或使用对象的多个属性是，使用对象的解构操作。</li>
</ul>
<blockquote>
<p>对象解构可以无需为这些属性创建临时变量。</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">getFullName</span>(<span class="params">user</span>) </span>&#123;</div><div class="line">  <span class="keyword">const</span> firstName = user.firstName</div><div class="line">  <span class="keyword">const</span> lastName = user.lastName</div><div class="line"></div><div class="line">  <span class="keyword">return</span> <span class="string">`<span class="subst">$&#123;firstName&#125;</span> <span class="subst">$&#123;lastName&#125;</span>`</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">getFullName</span>(<span class="params">user</span>) </span>&#123;</div><div class="line">  <span class="keyword">const</span> &#123; firstName, lastName &#125; = user</div><div class="line">  <span class="keyword">return</span> <span class="string">`<span class="subst">$&#123;firstName&#125;</span> <span class="subst">$&#123;lastName&#125;</span>`</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// best</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">getFullName</span>(<span class="params">&#123; firstName, lastName &#125;</span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> <span class="string">`<span class="subst">$&#123;firstName&#125;</span> <span class="subst">$&#123;lastName&#125;</span>`</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>5.2 使用数组解构。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>]</div><div class="line"></div><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="keyword">const</span> first = arr[<span class="number">0</span>]</div><div class="line"><span class="keyword">const</span> second = arr[<span class="number">1</span>]</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line"><span class="keyword">const</span> [first, second] = arr</div></pre></td></tr></table></figure>
<ul>
<li>5.3 对于多个返回值的情况，使用对象结构而不是数组解构。</li>
</ul>
<blockquote>
<p>在不改变函数使用方式的情况下，可以随时添加新的属性或调整顺序。</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">  <span class="comment">// bad</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">processInput</span>(<span class="params">input</span>) </span>&#123;</div><div class="line">  <span class="comment">// then a miracle occurs</span></div><div class="line">  <span class="keyword">return</span> [left, right, top, bottom]</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// the caller needs to think about the order of return data</span></div><div class="line"><span class="keyword">const</span> [left, __, top] = processInput(input)</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">processInput</span>(<span class="params">input</span>) </span>&#123;</div><div class="line">  <span class="comment">// then a miracle occurs</span></div><div class="line">  <span class="keyword">return</span> &#123; left, right, top, bottom &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// the caller selects only the data they need</span></div><div class="line"><span class="keyword">const</span> &#123; left, top &#125; = processInput(input)</div></pre></td></tr></table></figure>
<p><a href="#toc">目录</a><br><a name="strings"></a></p>
<h2 id="字符串"><a href="#字符串" class="headerlink" title="字符串"></a>字符串</h2><ul>
<li>6.1 对字符串使用单引号<code>&#39;</code>。eslint：<a href="http://eslint.org/docs/rules/quotes.html" target="_blank" rel="external"><code>quotes</code></a></li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"> <span class="comment">// bad</span></div><div class="line"><span class="keyword">const</span> name = <span class="string">"Capt. Janeway"</span></div><div class="line"></div><div class="line"><span class="comment">// bad - template literals should contain interpolation or newlines</span></div><div class="line"><span class="keyword">const</span> name = <span class="string">`Capt. Janeway`</span></div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line"><span class="keyword">const</span> name = <span class="string">'Capt. Janeway'</span></div></pre></td></tr></table></figure>
<ul>
<li>6.2 对于超过100个字符的字符串，不应该写成以连接字符连接的跨行形式。</li>
</ul>
<blockquote>
<p>跨行的字符串在写作开发和代码检索时变得很困难。</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">  <span class="comment">// bad</span></div><div class="line"><span class="keyword">const</span> errorMessage = <span class="string">'This is a super long error that was thrown because \</span></div><div class="line">of Batman. When you stop to think about how Batman had anything to do \</div><div class="line">with this, you would get nowhere \</div><div class="line">fast.'</div><div class="line"></div><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="keyword">const</span> errorMessage = <span class="string">'This is a super long error that was thrown because '</span> +</div><div class="line">  <span class="string">'of Batman. When you stop to think about how Batman had anything to do '</span> +</div><div class="line">  <span class="string">'with this, you would get nowhere fast.'</span></div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line"><span class="keyword">const</span> errorMessage = <span class="string">'This is a super long error that was thrown because of Batman. When you stop to think about how Batman had anything to do with this, you would get nowhere fast.'</span></div></pre></td></tr></table></figure>
<ul>
<li>6.3 当已编程的方式构建字符串时，应该使用模版字符串来代替字符串连接。eslint：<a href="http://eslint.org/docs/rules/prefer-template.html" target="_blank" rel="external"><code>prefer-template</code></a> <a href="http://eslint.org/docs/rules/template-curly-spacing" target="_blank" rel="external"><code>template-curly-spacing</code></a></li>
</ul>
<blockquote>
<p>模板字符串提供可读的，简洁的语法，具有适当的换行符和字符串插值功能。</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"> <span class="comment">// bad</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">sayHi</span>(<span class="params">name</span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> <span class="string">'How are you, '</span> + name + <span class="string">'?'</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">sayHi</span>(<span class="params">name</span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> [<span class="string">'How are you, '</span>, name, <span class="string">'?'</span>].join()</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">sayHi</span>(<span class="params">name</span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> <span class="string">`How are you, <span class="subst">$&#123; name &#125;</span>?`</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">sayHi</span>(<span class="params">name</span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> <span class="string">`How are you, <span class="subst">$&#123;name&#125;</span>?`</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li><p>6.4 不要使用在字符串上使用 <code>eval()</code>，它会产生很多漏洞。eslint：<a href="http://eslint.org/docs/rules/no-eval" target="_blank" rel="external"><code>no-eval</code></a></p>
</li>
<li><p>6.5 不要在字符串中使用不必要的转译字符。eslint：<a href="http://eslint.org/docs/rules/no-useless-escape" target="_blank" rel="external"><code>no-useless-escape</code></a></p>
</li>
</ul>
<blockquote>
<p>转义字符会影响可读性，所以请在只有必要的时候使用它。</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"> <span class="comment">// bad</span></div><div class="line"><span class="keyword">const</span> foo = <span class="string">'\'this\' \i\s \"quoted\"'</span></div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line"><span class="keyword">const</span> foo = <span class="string">'\'this\' is "quoted"'</span></div><div class="line"><span class="keyword">const</span> foo = <span class="string">`my name is '<span class="subst">$&#123;name&#125;</span>'`</span></div></pre></td></tr></table></figure>
<p><a href="#toc">目录</a><br><a name="functions"></a></p>
<h2 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h2><ul>
<li>7.1 使用命名函数而不是函数声明的方式。 eslint： <a href="http://eslint.org/docs/rules/func-style" target="_blank" rel="external"><code>func-style</code></a> </li>
</ul>
<blockquote>
<p>函数声明是被提升的，这就意味着它会很容易在它定义之前被引用。这不利于可读性和可维护性。如果你发现一个函数的定义非常大或者复杂甚至影响到了文件其他部分的理解，那么该函数应该提取到单独的模块中。不要忘了命名表达式，匿名函数会对定位问题和调查错误的调用栈带来麻烦。</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"> <span class="comment">// bad</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="comment">// ...</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="keyword">const</span> foo = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="comment">// ...</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line"><span class="keyword">const</span> foo = <span class="function"><span class="keyword">function</span> <span class="title">bar</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="comment">// ...</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>7.2 使用括号包裹立即执行函数。eslint：<a href="http://eslint.org/docs/rules/wrap-iife.html" target="_blank" rel="external"><code>wrap-iife</code></a></li>
</ul>
<blockquote>
<p>一个立即执行函数表达式是一个独立的单元，使用括号包裹它很清楚的表明了这一点。但是，在使用模块的现在，几乎用不到IIFE。</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// immediately-invoked function expression (IIFE)</span></div><div class="line">(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="built_in">console</span>.log(<span class="string">'Welcome to the Internet. Please follow me.'</span>)</div><div class="line">&#125;())</div></pre></td></tr></table></figure>
<ul>
<li><p>7.3 不要在一个非函数块中定义一个函数(if,while,etc)，而是将函数复制给一个变量。浏览器可能会允许这样做，但是它们的做法各异，这并不是一个好消息。 <a href="http://eslint.org/docs/rules/no-loop-func.html" target="_blank" rel="external"><code>no-loop-func</code></a></p>
</li>
<li><p>7.4 Note：ECMA-262 将 <code>block</code> 定义为一组声明，但是函数定义并不是声明。 <a href="http://www.ecma-international.org/publications/files/ECMA-ST/Ecma-262.pdf#page=97" target="_blank" rel="external">Read ECMA-262’s note on this issue</a>。</p>
</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="keyword">if</span> (currentUser) &#123;</div><div class="line">  <span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'Nope.'</span>)</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line"><span class="keyword">let</span> test</div><div class="line"><span class="keyword">if</span> (currentUser) &#123;</div><div class="line">  test = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'Yup.'</span>)</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>7.5 不要将一个参数命名为 <code>arguments</code>，否者它将优先于每个函数作用域的 <code>arguments</code> 对象被使用。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"> <span class="comment">// bad</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params">name, options, arguments</span>) </span>&#123;</div><div class="line">  <span class="comment">// ...</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params">name, options, args</span>) </span>&#123;</div><div class="line">  <span class="comment">// ...</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>7.6 不要使用 <code>arguments</code>，使用剩余语法 <code>...</code> 作为替代。eslint：<a href="http://eslint.org/docs/rules/prefer-rest-params" target="_blank" rel="external"><code>prefer-rest-params</code></a></li>
</ul>
<blockquote>
<p><code>...</code> 就是方法的的参数列表，同时剩余参数表达式也是一个真实的数组，而 <code>argument</code> 仅仅是类数组(Array-like)。</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"> <span class="comment">// bad</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">concatenateAll</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">const</span> args = <span class="built_in">Array</span>.prototype.slice.call(<span class="built_in">arguments</span>)</div><div class="line">  <span class="keyword">return</span> args.join(<span class="string">''</span>)</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">concatenateAll</span>(<span class="params">...args</span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> args.join(<span class="string">''</span>)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>7.7 使用默认参数与法而不是变异的函数参数。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// really bad</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">handleThings</span>(<span class="params">opts</span>) </span>&#123;</div><div class="line">  <span class="comment">// No! We shouldn’t mutate function arguments.</span></div><div class="line">  <span class="comment">// Double bad: if opts is falsy it'll be set to an object which may</span></div><div class="line">  <span class="comment">// be what you want but it can introduce subtle bugs.</span></div><div class="line">  opts = opts || &#123;&#125;</div><div class="line">  <span class="comment">// ...</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// still bad</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">handleThings</span>(<span class="params">opts</span>) </span>&#123;</div><div class="line">  <span class="keyword">if</span> (opts === <span class="keyword">void</span> <span class="number">0</span>) &#123;</div><div class="line">    opts = &#123;&#125;</div><div class="line">  &#125;</div><div class="line">  <span class="comment">// ...</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">handleThings</span>(<span class="params">opts = &#123;&#125;</span>) </span>&#123;</div><div class="line">  <span class="comment">// ...</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>7.8 避免默认参数的副作用。</li>
</ul>
<blockquote>
<p>会产生混乱。</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"> <span class="keyword">var</span> b = <span class="number">1</span></div><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">count</span>(<span class="params">a = b++</span>) </span>&#123;</div><div class="line">  <span class="built_in">console</span>.log(a)</div><div class="line">&#125;</div><div class="line">count()  <span class="comment">// 1</span></div><div class="line">count()  <span class="comment">// 2</span></div><div class="line">count(<span class="number">3</span>) <span class="comment">// 3</span></div><div class="line">count()  <span class="comment">// 3</span></div></pre></td></tr></table></figure>
<ul>
<li>7.9 总是把默认参数放在最后。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">  <span class="comment">// bad</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">handleThings</span>(<span class="params">opts = &#123;&#125;, name</span>) </span>&#123;</div><div class="line">  <span class="comment">// ...</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">handleThings</span>(<span class="params">name, opts = &#123;&#125;</span>) </span>&#123;</div><div class="line">  <span class="comment">// ...</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>7.10 不要使用 <code>Function</code> 构造函数创建一个新的函数。eslint：<a href="http://eslint.org/docs/rules/no-new-func" target="_blank" rel="external"><code>no-new-func</code></a></li>
</ul>
<blockquote>
<p>使用这种方式创建函数和在 string 上使用 <code>eval()</code> 相似，会暴漏很多漏洞。</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="keyword">var</span> add = <span class="keyword">new</span> <span class="built_in">Function</span>(<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'return a + b'</span>)</div><div class="line"></div><div class="line"><span class="comment">// still bad</span></div><div class="line"><span class="keyword">var</span> subtract = <span class="built_in">Function</span>(<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'return a - b'</span>)</div></pre></td></tr></table></figure>
<ul>
<li>7.11 在函数签名处加一空格。eslint：eslint: <a href="http://eslint.org/docs/rules/space-before-function-paren" target="_blank" rel="external"><code>space-before-function-paren</code></a> <a href="http://eslint.org/docs/rules/space-before-blocks" target="_blank" rel="external"><code>space-before-blocks</code></a></li>
</ul>
<blockquote>
<p>在添加或异常名字时不再需要添加或删除空格，保证了一致性。</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"> <span class="comment">// bad</span></div><div class="line"><span class="keyword">const</span> f = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;&#125;</div><div class="line"><span class="keyword">const</span> g = <span class="function"><span class="keyword">function</span> (<span class="params"></span>)</span>&#123;&#125;</div><div class="line"><span class="keyword">const</span> h = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125;</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line"><span class="keyword">const</span> x = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;&#125;</div><div class="line"><span class="keyword">const</span> y = <span class="function"><span class="keyword">function</span> <span class="title">a</span>(<span class="params"></span>) </span>&#123;&#125;</div></pre></td></tr></table></figure>
<ul>
<li>7.12 不要修改参数。eslint：<a href="http://eslint.org/docs/rules/no-param-reassign.html" target="_blank" rel="external"><code>no-param-reassign</code></a></li>
</ul>
<blockquote>
<p>操作作为参数出入到函数内的对象，会在函数的调用者中造成不能预期的副作用。</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">  <span class="comment">// bad</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">f1</span>(<span class="params">obj</span>) </span>&#123;</div><div class="line">  obj.key = <span class="number">1</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">f2</span>(<span class="params">obj</span>) </span>&#123;</div><div class="line">  <span class="keyword">const</span> key = <span class="built_in">Object</span>.prototype.hasOwnProperty.call(obj, <span class="string">'key'</span>) ? obj.key : <span class="number">1</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>7.13 不要对参数重新赋值。eslint： <a href="http://eslint.org/docs/rules/no-param-reassign.html" target="_blank" rel="external"><code>no-param-reassign</code></a></li>
</ul>
<blockquote>
<p>对参数重新赋值会造成不能预期的行为，尤其当访问 <code>arguments</code> 对象时。也会造成优化问题，尤其在 V8 中。</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"> <span class="comment">// bad</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">f1</span>(<span class="params">a</span>) </span>&#123;</div><div class="line">  a = <span class="number">1</span></div><div class="line">  <span class="comment">// ...</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">f2</span>(<span class="params">a</span>) </span>&#123;</div><div class="line">  <span class="keyword">if</span> (!a) &#123; a = <span class="number">1</span> &#125;</div><div class="line">  <span class="comment">// ...</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">f3</span>(<span class="params">a</span>) </span>&#123;</div><div class="line">  <span class="keyword">const</span> b = a || <span class="number">1</span></div><div class="line">  <span class="comment">// ...</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">f4</span>(<span class="params">a = <span class="number">1</span></span>) </span>&#123;</div><div class="line">  <span class="comment">// ...</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>7.14 在调用可变参数函数，倾向于使用扩展操作符 <code>...</code>。eslit：<a href="http://eslint.org/docs/rules/prefer-spread" target="_blank" rel="external"><code>prefer-spread</code></a></li>
</ul>
<blockquote>
<p>这样会更加清晰，不必提供上下文，也不能轻易使用 <code>apply</code> 组合 <code>new</code></p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"> <span class="comment">// bad</span></div><div class="line"><span class="keyword">const</span> x = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]</div><div class="line"><span class="built_in">console</span>.log.apply(<span class="built_in">console</span>, x)</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line"><span class="keyword">const</span> x = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]</div><div class="line"><span class="built_in">console</span>.log(...x)</div><div class="line"></div><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="keyword">new</span> (<span class="built_in">Function</span>.prototype.bind.apply(<span class="built_in">Date</span>, [<span class="literal">null</span>, <span class="number">2016</span>, <span class="number">8</span>, <span class="number">5</span>]))</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line"><span class="keyword">new</span> <span class="built_in">Date</span>(...[<span class="number">2016</span>, <span class="number">8</span>, <span class="number">5</span>])</div></pre></td></tr></table></figure>
<ul>
<li>7.15 具有多行签名的函数亦或是调用应该像其他多行列表一样遵循这样的指南：每个项目在一行上，最后一个项目中带有一个逗号。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params">bar,</span></span></div><div class="line">             baz,</div><div class="line">             quux) &#123;</div><div class="line">  <span class="comment">// ...</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span></span></div><div class="line">  bar,</div><div class="line">  baz,</div><div class="line">  quux,</div><div class="line">) &#123;</div><div class="line">  <span class="comment">// ...</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="built_in">console</span>.log(foo,</div><div class="line">  bar,</div><div class="line">  baz)</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line"><span class="built_in">console</span>.log(</div><div class="line">  foo,</div><div class="line">  bar,</div><div class="line">  baz,</div><div class="line">)</div></pre></td></tr></table></figure>
<p><a href="#toc">目录</a><br><a name="arrow-functions"></a></p>
<h2 id="箭头函数"><a href="#箭头函数" class="headerlink" title="箭头函数"></a>箭头函数</h2><ul>
<li>8.1 当必须使用函数表达式时（亦或传递一个匿名函数），使用箭头函数。 <a href="http://eslint.org/docs/rules/prefer-arrow-callback.html" target="_blank" rel="external"><code>prefer-arrow-callback</code></a>, <a href="http://eslint.org/docs/rules/arrow-spacing.html" target="_blank" rel="external"><code>arrow-spacing</code></a></li>
</ul>
<blockquote>
<p>箭头函数会创建一个执行在 <code>this</code> 上下文的函数，该函数正式开发者所需要的，同时有更加简洁语法。</p>
<p>如果一函数相当的复杂，这时应该考虑抽离复杂的逻辑到单独的函数定义中。</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"> <span class="comment">// bad</span></div><div class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>].map(<span class="function"><span class="keyword">function</span> (<span class="params">x</span>) </span>&#123;</div><div class="line">  <span class="keyword">const</span> y = x + <span class="number">1</span></div><div class="line">  <span class="keyword">return</span> x * y</div><div class="line">&#125;)</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>].map(<span class="function">(<span class="params">x</span>) =&gt;</span> &#123;</div><div class="line">  <span class="keyword">const</span> y = x + <span class="number">1</span></div><div class="line">  <span class="keyword">return</span> x * y</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<ul>
<li>8.2 如果函数体只包含单行无副作用表达式的声明，忽略括号同时使用隐式的返回。否则保留括号并且使用 <code>return</code> 表达式。 eslint： <a href="http://eslint.org/docs/rules/arrow-parens.html" target="_blank" rel="external"><code>arrow-parens</code></a>, <a href="http://eslint.org/docs/rules/arrow-body-style.html" target="_blank" rel="external"><code>arrow-body-style</code></a></li>
</ul>
<blockquote>
<p>语法糖，当多个函数被链式调用时，增加了可读性。</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div></pre></td><td class="code"><pre><div class="line"> <span class="comment">// bad</span></div><div class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>].map(<span class="function"><span class="params">number</span> =&gt;</span> &#123;</div><div class="line">  <span class="keyword">const</span> nextNumber = number + <span class="number">1</span></div><div class="line">  <span class="string">`A string containing the <span class="subst">$&#123;nextNumber&#125;</span>.`</span></div><div class="line">&#125;)</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>].map(<span class="function"><span class="params">number</span> =&gt;</span> <span class="string">`A string containing the <span class="subst">$&#123;number&#125;</span>.`</span>)</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>].map(<span class="function">(<span class="params">number</span>) =&gt;</span> &#123;</div><div class="line">  <span class="keyword">const</span> nextNumber = number + <span class="number">1</span></div><div class="line">  <span class="keyword">return</span> <span class="string">`A string containing the <span class="subst">$&#123;nextNumber&#125;</span>.`</span></div><div class="line">&#125;)</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>].map(<span class="function">(<span class="params">number, index</span>) =&gt;</span> (&#123;</div><div class="line">  [index]: number,</div><div class="line">&#125;))</div><div class="line"></div><div class="line"><span class="comment">// No implicit return with side effects</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params">callback</span>) </span>&#123;</div><div class="line">  <span class="keyword">const</span> val = callback()</div><div class="line">  <span class="keyword">if</span> (val === <span class="literal">true</span>) &#123;</div><div class="line">    <span class="comment">// Do something if callback returns true</span></div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">let</span> bool = <span class="literal">false</span></div><div class="line"></div><div class="line"><span class="comment">// bad</span></div><div class="line">foo(<span class="function"><span class="params">()</span> =&gt;</span> bool = <span class="literal">true</span>)</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line">foo(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</div><div class="line">  bool = <span class="literal">true</span></div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<ul>
<li>8.3 在表达式会有多行的情况下，使用括号来增加可读性。</li>
</ul>
<blockquote>
<p>可以清楚的显示出函数的开始和结束。</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">[<span class="string">'get'</span>, <span class="string">'post'</span>, <span class="string">'put'</span>].map(<span class="function"><span class="params">httpMethod</span> =&gt;</span> <span class="built_in">Object</span>.prototype.hasOwnProperty.call(</div><div class="line">    httpMagicObjectWithAVeryLongName,</div><div class="line">    httpMethod,</div><div class="line">  )</div><div class="line">)</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line">[<span class="string">'get'</span>, <span class="string">'post'</span>, <span class="string">'put'</span>].map(<span class="function"><span class="params">httpMethod</span> =&gt;</span> (</div><div class="line">  <span class="built_in">Object</span>.prototype.hasOwnProperty.call(</div><div class="line">    httpMagicObjectWithAVeryLongName,</div><div class="line">    httpMethod,</div><div class="line">  )</div><div class="line">))</div></pre></td></tr></table></figure>
<ul>
<li>8.4 如果函数只有一个参数，不使用括号，省略小括号。否者，为了明确性和一致性总是使用小括号包裹参数。Note：总是使用小括号也是可以接受的，在这种情况下，eslint 可以使用 <a href="http://eslint.org/docs/rules/arrow-parens#always" target="_blank" rel="external">“always”</a> 选项  、eslint: <a href="http://eslint.org/docs/rules/arrow-parens.html" target="_blank" rel="external"><code>arrow-parens</code></a></li>
</ul>
<blockquote>
<p>减少视觉混乱</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"> <span class="comment">// bad</span></div><div class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>].map(<span class="function">(<span class="params">x</span>) =&gt;</span> x * x)</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>].map(<span class="function"><span class="params">x</span> =&gt;</span> x * x)</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>].map(<span class="function"><span class="params">number</span> =&gt;</span> (</div><div class="line">  <span class="string">`A long string with the <span class="subst">$&#123;number&#125;</span>. It’s so long that we don’t want it to take up space on the .map line!`</span></div><div class="line">))</div><div class="line"></div><div class="line"><span class="comment">// bad</span></div><div class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>].map(<span class="function"><span class="params">x</span> =&gt;</span> &#123;</div><div class="line">  <span class="keyword">const</span> y = x + <span class="number">1</span></div><div class="line">  <span class="keyword">return</span> x * y</div><div class="line">&#125;)</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>].map(<span class="function">(<span class="params">x</span>) =&gt;</span> &#123;</div><div class="line">  <span class="keyword">const</span> y = x + <span class="number">1</span></div><div class="line">  <span class="keyword">return</span> x * y</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<ul>
<li>8.5 避免将箭头函数(<code>=&gt;</code>)和比较操作符(<code>&lt;=</code>,<code>&gt;=</code>)混淆，eslint：(<a href="http://eslint.org/docs/rules/no-confusing-arrow" target="_blank" rel="external">http://eslint.org/docs/rules/no-confusing-arrow</a>)</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"> <span class="comment">// bad</span></div><div class="line"><span class="keyword">const</span> itemHeight = <span class="function"><span class="params">item</span> =&gt;</span> item.height &gt; <span class="number">256</span> ? item.largeSize : item.smallSize</div><div class="line"></div><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="keyword">const</span> itemHeight = <span class="function">(<span class="params">item</span>) =&gt;</span> item.height &gt; <span class="number">256</span> ? item.largeSize : item.smallSize</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line"><span class="keyword">const</span> itemHeight = <span class="function"><span class="params">item</span> =&gt;</span> (item.height &gt; <span class="number">256</span> ? item.largeSize : item.smallSize)</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line"><span class="keyword">const</span> itemHeight = <span class="function">(<span class="params">item</span>) =&gt;</span> &#123;</div><div class="line">  <span class="keyword">const</span> &#123; height, largeSize, smallSize &#125; = item</div><div class="line">  <span class="keyword">return</span> height &gt; <span class="number">256</span> ? largeSize : smallSize</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><a href="#toc">目录</a><br><a name="classes--constructors"></a></p>
<h2 id="Classes-amp-Contstructors"><a href="#Classes-amp-Contstructors" class="headerlink" title="Classes &amp; Contstructors"></a>Classes &amp; Contstructors</h2><ul>
<li>9.1 总是使用 <code>class</code> ，避免直接操作 <code>prototype</code> 。</li>
</ul>
<blockquote>
<p><code>class</code> 语法更加精确和简单描述问题。</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"> <span class="comment">// bad</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">Queue</span>(<span class="params">contents = []</span>) </span>&#123;</div><div class="line">  <span class="keyword">this</span>.queue = [...contents]</div><div class="line">&#125;</div><div class="line">Queue.prototype.pop = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">const</span> value = <span class="keyword">this</span>.queue[<span class="number">0</span>]</div><div class="line">  <span class="keyword">this</span>.queue.splice(<span class="number">0</span>, <span class="number">1</span>)</div><div class="line">  <span class="keyword">return</span> value</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Queue</span> </span>&#123;</div><div class="line">  <span class="keyword">constructor</span>(contents = []) &#123;</div><div class="line">    <span class="keyword">this</span>.queue = [...contents]</div><div class="line">  &#125;</div><div class="line">  pop() &#123;</div><div class="line">    <span class="keyword">const</span> value = <span class="keyword">this</span>.queue[<span class="number">0</span>]</div><div class="line">    <span class="keyword">this</span>.queue.splice(<span class="number">0</span>, <span class="number">1</span>)</div><div class="line">    <span class="keyword">return</span> value</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>9.2 使用 <code>extends</code> 实现继承。</li>
</ul>
<blockquote>
<p>这是一种内置的集成 prototype 功能的方式，并且不会破会 <code>instanceof</code> 的功能。</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="keyword">const</span> inherits = <span class="built_in">require</span>(<span class="string">'inherits'</span>)</div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">PeekableQueue</span>(<span class="params">contents</span>) </span>&#123;</div><div class="line">  Queue.apply(<span class="keyword">this</span>, contents)</div><div class="line">&#125;</div><div class="line">inherits(PeekableQueue, Queue)</div><div class="line">PeekableQueue.prototype.peek = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> <span class="keyword">this</span>.queue[<span class="number">0</span>]</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">PeekableQueue</span> <span class="keyword">extends</span> <span class="title">Queue</span> </span>&#123;</div><div class="line">  peek() &#123;</div><div class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.queue[<span class="number">0</span>]</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>9.3 方法可以返回 <code>this</code> 来实现链式调用。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// bad</span></div><div class="line">Jedi.prototype.jump = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">this</span>.jumping = <span class="literal">true</span></div><div class="line">  <span class="keyword">return</span> <span class="literal">true</span></div><div class="line">&#125;</div><div class="line"></div><div class="line">Jedi.prototype.setHeight = <span class="function"><span class="keyword">function</span> (<span class="params">height</span>) </span>&#123;</div><div class="line">  <span class="keyword">this</span>.height = height</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">const</span> luke = <span class="keyword">new</span> Jedi()</div><div class="line">luke.jump() <span class="comment">// =&gt; true</span></div><div class="line">luke.setHeight(<span class="number">20</span>) <span class="comment">// =&gt; undefined</span></div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Jedi</span> </span>&#123;</div><div class="line">  jump() &#123;</div><div class="line">    <span class="keyword">this</span>.jumping = <span class="literal">true</span></div><div class="line">    <span class="keyword">return</span> <span class="keyword">this</span></div><div class="line">  &#125;</div><div class="line"></div><div class="line">  setHeight(height) &#123;</div><div class="line">    <span class="keyword">this</span>.height = height</div><div class="line">    <span class="keyword">return</span> <span class="keyword">this</span></div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">const</span> luke = <span class="keyword">new</span> Jedi()</div><div class="line"></div><div class="line">luke.jump()</div><div class="line">  .setHeight(<span class="number">20</span>)</div></pre></td></tr></table></figure>
<ul>
<li>9.4 可以自定义 toString() 方法，只要它正常工作并且没有副作用。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"> <span class="class"><span class="keyword">class</span> <span class="title">Jedi</span> </span>&#123;</div><div class="line">  <span class="keyword">constructor</span>(options = &#123;&#125;) &#123;</div><div class="line">    <span class="keyword">this</span>.name = options.name || <span class="string">'no name'</span></div><div class="line">  &#125;</div><div class="line"></div><div class="line">  getName() &#123;</div><div class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.name</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  toString() &#123;</div><div class="line">    <span class="keyword">return</span> <span class="string">`Jedi - <span class="subst">$&#123;<span class="keyword">this</span>.getName()&#125;</span>`</span></div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>9.5 类有如果没有指定构造方法时，他有一个默认的构造方法。空的构造方法亦或代理到父类的构造方法时没有必要的。eslint：: <a href="http://eslint.org/docs/rules/no-useless-constructor" target="_blank" rel="external"><code>no-useless-constructor</code></a></li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Jedi</span> </span>&#123;</div><div class="line">  <span class="keyword">constructor</span>() &#123;&#125;</div><div class="line"></div><div class="line">  getName() &#123;</div><div class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.name</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Rey</span> <span class="keyword">extends</span> <span class="title">Jedi</span> </span>&#123;</div><div class="line">  <span class="keyword">constructor</span>(...args) &#123;</div><div class="line">    <span class="keyword">super</span>(...args)</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Rey</span> <span class="keyword">extends</span> <span class="title">Jedi</span> </span>&#123;</div><div class="line">  <span class="keyword">constructor</span>(...args) &#123;</div><div class="line">    <span class="keyword">super</span>(...args)</div><div class="line">    <span class="keyword">this</span>.name = <span class="string">'Rey'</span></div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>9.6 避免两个相同的类成员。eslint： <a href="http://eslint.org/docs/rules/no-dupe-class-members" target="_blank" rel="external"><code>no-dupe-class-members</code></a></li>
</ul>
<blockquote>
<p>重复的类成员声明会默认的使用最后一个，创建重复的类成员基本可以认为是一个 bug 。</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Foo</span> </span>&#123;</div><div class="line">  bar() &#123; <span class="keyword">return</span> <span class="number">1</span> &#125;</div><div class="line">  bar() &#123; <span class="keyword">return</span> <span class="number">2</span> &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Foo</span> </span>&#123;</div><div class="line">  bar() &#123; <span class="keyword">return</span> <span class="number">1</span> &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Foo</span> </span>&#123;</div><div class="line">  bar() &#123; <span class="keyword">return</span> <span class="number">2</span> &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><a href="#toc">目录</a><br><a name="modules"></a></p>
<h2 id="模块"><a href="#模块" class="headerlink" title="模块"></a>模块</h2><ul>
<li>10.1 总是使用模块(<code>impoort</code>/<code>export</code>)而不是非标准的模块系统。你可以使用 transpile (源代码到源代码的编译器) 到你喜欢的模块系统。</li>
</ul>
<blockquote>
<p>模块是未来，一开始就使用未来的机制！</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"> <span class="comment">// bad</span></div><div class="line"><span class="keyword">const</span> AirbnbStyleGuide = <span class="built_in">require</span>(<span class="string">'./AirbnbStyleGuide'</span>)</div><div class="line"><span class="built_in">module</span>.exports = AirbnbStyleGuide.es6</div><div class="line"></div><div class="line"><span class="comment">// ok</span></div><div class="line"><span class="keyword">import</span> AirbnbStyleGuide <span class="keyword">from</span> <span class="string">'./AirbnbStyleGuide'</span></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> AirbnbStyleGuide.es6</div><div class="line"></div><div class="line"><span class="comment">// best</span></div><div class="line"><span class="keyword">import</span> &#123; es6 &#125; <span class="keyword">from</span> <span class="string">'./AirbnbStyleGuide'</span></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> es6</div></pre></td></tr></table></figure>
<ul>
<li>10.2 不要使用星号导入。</li>
</ul>
<blockquote>
<p>只有在带个默认导入时才可以这样使用。</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"> <span class="comment">// bad</span></div><div class="line"><span class="keyword">import</span> * <span class="keyword">as</span> AirbnbStyleGuide <span class="keyword">from</span> <span class="string">'./AirbnbStyleGuide'</span></div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line"><span class="keyword">import</span> AirbnbStyleGuide <span class="keyword">from</span> <span class="string">'./AirbnbStyleGuide'</span></div></pre></td></tr></table></figure>
<ul>
<li>10.3 不要直接导出所导入的。</li>
</ul>
<blockquote>
<p>尽管一行足够简明扼要，但是一行明确导入，一行明确到处是问题具有一致性。</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"> <span class="comment">// bad</span></div><div class="line"><span class="comment">// filename es6.js</span></div><div class="line"><span class="keyword">export</span> &#123; es6 <span class="keyword">as</span> <span class="keyword">default</span> &#125; <span class="keyword">from</span> <span class="string">'./AirbnbStyleGuide'</span></div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line"><span class="comment">// filename es6.js</span></div><div class="line"><span class="keyword">import</span> &#123; es6 &#125; <span class="keyword">from</span> <span class="string">'./AirbnbStyleGuide'</span></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> es6</div></pre></td></tr></table></figure>
<ul>
<li>10.4 从一个地方导入同一路径下的模块。eslint：<a href="http://eslint.org/docs/rules/no-duplicate-imports" target="_blank" rel="external"><code>no-duplicate-imports</code></a></li>
</ul>
<blockquote>
<p>从多行导入同一个路径下的模块会让代码难以维护。</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="keyword">import</span> foo <span class="keyword">from</span> <span class="string">'foo'</span></div><div class="line"><span class="comment">// … some other imports … //</span></div><div class="line"><span class="keyword">import</span> &#123; named1, named2 &#125; <span class="keyword">from</span> <span class="string">'foo'</span></div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line"><span class="keyword">import</span> foo, &#123; named1, named2 &#125; <span class="keyword">from</span> <span class="string">'foo'</span></div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line"><span class="keyword">import</span> foo, &#123;</div><div class="line">  named1,</div><div class="line">  named2,</div><div class="line">&#125; <span class="keyword">from</span> <span class="string">'foo'</span></div></pre></td></tr></table></figure>
<ul>
<li>10.5 不要导出可修改的绑定。eslint：<a href="https://github.com/benmosher/eslint-plugin-import/blob/master/docs/rules/no-mutable-exports.md" target="_blank" rel="external"><code>import/no-mutable-exports</code></a></li>
</ul>
<blockquote>
<p>一般而言，应该避免修改，特别是在导出可变绑定时。但是这项技术可能会用在个别情况下，到处的应该仅仅是常量。</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"> <span class="comment">// bad</span></div><div class="line"><span class="keyword">let</span> foo = <span class="number">3</span></div><div class="line"><span class="keyword">export</span> &#123; foo &#125;</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line"><span class="keyword">const</span> foo = <span class="number">3</span></div><div class="line"><span class="keyword">export</span> &#123; foo &#125;</div></pre></td></tr></table></figure>
<ul>
<li>10.6 在单个导出的模块，倾向于使用默认的导出，而不是命名导出。eslint： <a href="https://github.com/benmosher/eslint-plugin-import/blob/master/docs/rules/prefer-default-export.md" target="_blank" rel="external"><code>import/prefer-default-export</code></a></li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"> <span class="comment">// bad</span></div><div class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;&#125;</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;&#125;</div></pre></td></tr></table></figure>
<ul>
<li>10.7 把所有的 <code>import</code> 至于非 import 表达式之上。eslint：<a href="https://github.com/benmosher/eslint-plugin-import/blob/master/docs/rules/first.md" target="_blank" rel="external"><code>import/first</code></a></li>
</ul>
<blockquote>
<p>因为 <code>import</code> 是被提升的，把他们放在最顶部可以避免一些奇怪的问题。</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">  <span class="comment">// bad</span></div><div class="line"><span class="keyword">import</span> foo <span class="keyword">from</span> <span class="string">'foo'</span></div><div class="line">foo.init()</div><div class="line"></div><div class="line"><span class="keyword">import</span> bar <span class="keyword">from</span> <span class="string">'bar'</span></div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line"><span class="keyword">import</span> foo <span class="keyword">from</span> <span class="string">'foo'</span></div><div class="line"><span class="keyword">import</span> bar <span class="keyword">from</span> <span class="string">'bar'</span></div><div class="line"></div><div class="line">foo.init()</div></pre></td></tr></table></figure>
<ul>
<li>10.8 多行的导入应该与多行数组和多行对象字面量相同。</li>
</ul>
<blockquote>
<p>大括号和尾逗号遵循和其他样式指南中的大括号相同的缩进规则。</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line">  <span class="comment">// bad</span></div><div class="line"><span class="keyword">import</span> &#123;longNameA, longNameB, longNameC, longNameD, longNameE&#125; <span class="keyword">from</span> <span class="string">'path'</span></div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line"><span class="keyword">import</span> &#123;</div><div class="line">  longNameA,</div><div class="line">  longNameB,</div><div class="line">  longNameC,</div><div class="line">  longNameD,</div><div class="line">  longNameE,</div><div class="line">&#125; <span class="keyword">from</span> <span class="string">'path'</span></div><div class="line"><span class="string">``</span><span class="string">` </span></div><div class="line"></div><div class="line">- 10.9 在模块导入语句中禁用 Webpack loader 语法。eslint：[`<span class="keyword">import</span>/no-webpack-loader-syntax<span class="string">`](https://github.com/benmosher/eslint-plugin-import/blob/master/docs/rules/no-webpack-loader-syntax.md)</span></div><div class="line"></div><div class="line">&gt; 由于在导入使用 Webpack 语法会将代码耦合到模块 bulder中，所以尽可能的在 `webpack.config.js<span class="string">` 中使用 loader 语法。</span></div><div class="line"></div><div class="line">`<span class="string">``</span>javascript</div><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="keyword">import</span> fooSass <span class="keyword">from</span> <span class="string">'css!sass!foo.scss'</span></div><div class="line"><span class="keyword">import</span> barCss <span class="keyword">from</span> <span class="string">'style!css!bar.css'</span></div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line"><span class="keyword">import</span> fooSass <span class="keyword">from</span> <span class="string">'foo.scss'</span></div><div class="line"><span class="keyword">import</span> barCss <span class="keyword">from</span> <span class="string">'bar.css'</span></div></pre></td></tr></table></figure>
<p><a href="#toc">目录</a><br><a name="iterators-and-generators"></a></p>
<h2 id="迭代器和生成器"><a href="#迭代器和生成器" class="headerlink" title="迭代器和生成器"></a>迭代器和生成器</h2><ul>
<li>11.1 不要使用迭代器。尽可能使用 JavaScript 的高阶函数而不是像 <code>for-in</code> 或 <code>for-of</code> 的循环。eslint： <a href="http://eslint.org/docs/rules/no-iterator.html" target="_blank" rel="external"><code>no-iterator</code></a> <a href="http://eslint.org/docs/rules/no-restricted-syntax" target="_blank" rel="external"><code>no-restricted-syntax</code></a></li>
</ul>
<blockquote>
<p>这强制实施2我们的不可变原则，处理返回值的纯函数更容易没有副作用。</p>
<p>使用<code>map()</code> / <code>every()</code> / <code>filter()</code> / <code>find()</code> / <code>findIndex()</code> / <code>reduce()</code> / <code>some()</code> / … 迭代数组,，and <code>Object.keys()</code> / <code>Object.values()</code> / <code>Object.entries()</code> 产生键的数组从而迭代对象。</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div></pre></td><td class="code"><pre><div class="line"> <span class="keyword">const</span> numbers = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]</div><div class="line"></div><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="keyword">let</span> sum = <span class="number">0</span></div><div class="line"><span class="keyword">for</span> (<span class="keyword">let</span> num <span class="keyword">of</span> numbers) &#123;</div><div class="line">  sum += num</div><div class="line">&#125;</div><div class="line">sum === <span class="number">15</span></div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line"><span class="keyword">let</span> sum = <span class="number">0</span></div><div class="line">numbers.forEach(<span class="function">(<span class="params">num</span>) =&gt;</span> &#123;</div><div class="line">  sum += num</div><div class="line">&#125;)</div><div class="line">sum === <span class="number">15</span></div><div class="line"></div><div class="line"><span class="comment">// best (use the functional force)</span></div><div class="line"><span class="keyword">const</span> sum = numbers.reduce(<span class="function">(<span class="params">total, num</span>) =&gt;</span> total + num, <span class="number">0</span>)</div><div class="line">sum === <span class="number">15</span></div><div class="line"></div><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="keyword">const</span> increasedByOne = []</div><div class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span> i &lt; numbers.length i++) &#123;</div><div class="line">  increasedByOne.push(numbers[i] + <span class="number">1</span>)</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line"><span class="keyword">const</span> increasedByOne = []</div><div class="line">numbers.forEach(<span class="function">(<span class="params">num</span>) =&gt;</span> &#123;</div><div class="line">  increasedByOne.push(num + <span class="number">1</span>)</div><div class="line">&#125;)</div><div class="line"></div><div class="line"><span class="comment">// best (keeping it functional)</span></div><div class="line"><span class="keyword">const</span> increasedByOne = numbers.map(<span class="function"><span class="params">num</span> =&gt;</span> num + <span class="number">1</span>)</div></pre></td></tr></table></figure>
<ul>
<li>11.2 当前不要使用生成器(generators)</li>
</ul>
<blockquote>
<p>生成器并不能无问题的 transpile 到ES5。</p>
</blockquote>
<ul>
<li>11.3 如果你无论如何都要使用生成器(generators)，请确保函数的签名空格是没有问题的。eslint：<a href="http://eslint.org/docs/rules/generator-star-spacing" target="_blank" rel="external"><code>generator-star-spacing</code></a></li>
</ul>
<blockquote>
<p><code>function</code> 和 <code>*</code> 都是概念上的关键字。<code>*</code> 并不是 <code>function</code> 的修改器，<code>function*</code> 是一个单独的构造函数，与 <code>function</code> 并不相同。</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="function"><span class="keyword">function</span> * <span class="title">foo</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="comment">// ...</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="keyword">const</span> bar = <span class="function"><span class="keyword">function</span> * (<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="comment">// ...</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="keyword">const</span> baz = <span class="function"><span class="keyword">function</span> *(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="comment">// ...</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="keyword">const</span> quux = <span class="function"><span class="keyword">function</span>*(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="comment">// ...</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="function"><span class="keyword">function</span>*<span class="title">foo</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="comment">// ...</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="function"><span class="keyword">function</span> *<span class="title">foo</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="comment">// ...</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// very bad</span></div><div class="line"><span class="function"><span class="keyword">function</span></span></div><div class="line">*</div><div class="line"><span class="title">foo</span>(<span class="params"></span>) &#123;</div><div class="line">  <span class="comment">// ...</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// very bad</span></div><div class="line"><span class="keyword">const</span> wat = <span class="function"><span class="keyword">function</span></span></div><div class="line">*</div><div class="line">(<span class="params"></span>) &#123;</div><div class="line">  <span class="comment">// ...</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line"><span class="function"><span class="keyword">function</span>* <span class="title">foo</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="comment">// ...</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line"><span class="keyword">const</span> foo = <span class="function"><span class="keyword">function</span>* (<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="comment">// ...</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><a href="#toc">目录</a><br><a name="properties"></a></p>
<h2 id="属性"><a href="#属性" class="headerlink" title="属性"></a>属性</h2><ul>
<li>12.1 当访问属性时使用点 <code>.</code>。eslint： <a href="http://eslint.org/docs/rules/dot-notation.html" target="_blank" rel="external"><code>dot-notation</code></a> </li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> luke = &#123;</div><div class="line">  <span class="attr">jedi</span>: <span class="literal">true</span>,</div><div class="line">  <span class="attr">age</span>: <span class="number">28</span>,</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="keyword">const</span> isJedi = luke[<span class="string">'jedi'</span>]</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line"><span class="keyword">const</span> isJedi = luke.jedi</div><div class="line"><span class="string">``</span><span class="string">` </span></div><div class="line"></div><div class="line">- 12.2 当使用变量访问属性时，使用中括号 `[]<span class="string">` 访问。</span></div><div class="line"></div><div class="line">`<span class="string">``</span>javascript</div><div class="line"> <span class="keyword">const</span> luke = &#123;</div><div class="line">  <span class="attr">jedi</span>: <span class="literal">true</span>,</div><div class="line">  <span class="attr">age</span>: <span class="number">28</span>,</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">getProp</span>(<span class="params">prop</span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> luke[prop]</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">const</span> isJedi = getProp(<span class="string">'jedi'</span>)</div></pre></td></tr></table></figure>
<ul>
<li>12.3 计算幂时使用 <code>**</code> 操作符。eslint：<a href="http://eslint.org/docs/rules/no-restricted-properties" target="_blank" rel="external"><code>no-restricted-properties</code></a></li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"> <span class="comment">// bad</span></div><div class="line"><span class="keyword">const</span> binary = <span class="built_in">Math</span>.pow(<span class="number">2</span>, <span class="number">10</span>)</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line"><span class="keyword">const</span> binary = <span class="number">2</span> ** <span class="number">10</span></div></pre></td></tr></table></figure>
<p><a href="#toc">目录</a><br><a name="variables"></a></p>
<h2 id="变量"><a href="#变量" class="headerlink" title="变量"></a>变量</h2><ul>
<li>13.1 总是使用 <code>const</code> 或 <code>let</code> 定义变量。如果不这样做的话将会生成全局变量，应该竭力避免污染全局的命名空间。地球超人警告过我们。 <a href="http://eslint.org/docs/rules/no-undef" target="_blank" rel="external"><code>no-undef</code></a> <a href="http://eslint.org/docs/rules/prefer-const" target="_blank" rel="external"><code>prefer-const</code></a></li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// bad</span></div><div class="line">superPower = <span class="keyword">new</span> SuperPower()</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line"><span class="keyword">const</span> superPower = <span class="keyword">new</span> SuperPower()</div></pre></td></tr></table></figure>
<ul>
<li>13.2 每个变量使用 <code>const</code> 或 <code>let</code> 变量修饰。eslint: <a href="http://eslint.org/docs/rules/one-var.html" target="_blank" rel="external"><code>one-var</code></a></li>
</ul>
<blockquote>
<p>用这种方式可以更加轻松的添加新的变量声明，也不用担心错将 <code>,</code> 写成 <code>;</code>，或引入一个只有一个标点的不同。调试时也可以对每个声明进行单步调试，而不是一次跳过它们所有的声明。</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"> <span class="comment">// bad</span></div><div class="line"><span class="keyword">const</span> items = getItems(),</div><div class="line">    goSportsTeam = <span class="literal">true</span>,</div><div class="line">    dragonball = <span class="string">'z'</span>;</div><div class="line"></div><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="comment">// (compare to above, and try to spot the mistake)</span></div><div class="line"><span class="keyword">const</span> items = getItems(),</div><div class="line">    goSportsTeam = <span class="literal">true</span>;</div><div class="line">    dragonball = <span class="string">'z'</span>;</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line"><span class="keyword">const</span> items = getItems();</div><div class="line"><span class="keyword">const</span> goSportsTeam = <span class="literal">true</span>;</div><div class="line"><span class="keyword">const</span> dragonball = <span class="string">'z'</span>;</div></pre></td></tr></table></figure>
<ul>
<li>13.3 分组你所有的 <code>consts</code> 修饰的变量和 <code>let</code> 修饰的变量。</li>
</ul>
<blockquote>
<p>这对于之后可能之前已经赋值过的变量再次赋值有所帮助。</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="keyword">let</span> i, len, dragonball,</div><div class="line">    items = getItems(),</div><div class="line">    goSportsTeam = <span class="literal">true</span></div><div class="line"></div><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="keyword">let</span> i</div><div class="line"><span class="keyword">const</span> items = getItems();</div><div class="line"><span class="keyword">let</span> dragonball</div><div class="line"><span class="keyword">const</span> goSportsTeam = <span class="literal">true</span></div><div class="line"><span class="keyword">let</span> len</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line"><span class="keyword">const</span> goSportsTeam = <span class="literal">true</span>;</div><div class="line"><span class="keyword">const</span> items = getItems()</div><div class="line"><span class="keyword">let</span> dragonball</div><div class="line"><span class="keyword">let</span> i</div><div class="line"><span class="keyword">let</span> length</div></pre></td></tr></table></figure>
<ul>
<li>13.4 在正确的位置为变量赋值。</li>
</ul>
<blockquote>
<p><code>let</code> 和 <code>const</code> 是块级的修饰符，而非函数级的。</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// bad - unnecessary function call</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">checkName</span>(<span class="params">hasName</span>) </span>&#123;</div><div class="line">  <span class="keyword">const</span> name = getName()</div><div class="line"></div><div class="line">  <span class="keyword">if</span> (hasName === <span class="string">'test'</span>) &#123;</div><div class="line">    <span class="keyword">return</span> <span class="literal">false</span></div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="keyword">if</span> (name === <span class="string">'test'</span>) &#123;</div><div class="line">    <span class="keyword">this</span>.setName(<span class="string">''</span>)</div><div class="line">    <span class="keyword">return</span> <span class="literal">false</span></div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="keyword">return</span> name</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">checkName</span>(<span class="params">hasName</span>) </span>&#123;</div><div class="line">  <span class="keyword">if</span> (hasName === <span class="string">'test'</span>) &#123;</div><div class="line">    <span class="keyword">return</span> <span class="literal">false</span></div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="keyword">const</span> name = getName()</div><div class="line"></div><div class="line">  <span class="keyword">if</span> (name === <span class="string">'test'</span>) &#123;</div><div class="line">    <span class="keyword">this</span>.setName(<span class="string">''</span>)</div><div class="line">    <span class="keyword">return</span> <span class="literal">false</span></div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="keyword">return</span> name</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>13.5 不要链式赋值。</li>
</ul>
<blockquote>
<p>链式赋值会隐式的创建全局变量。</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// bad</span></div><div class="line">(<span class="function"><span class="keyword">function</span> <span class="title">example</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="comment">// JavaScript interprets this as</span></div><div class="line">  <span class="comment">// let a = ( b = ( c = 1 ) )</span></div><div class="line">  <span class="comment">// The let keyword only applies to variable a variables b and c become</span></div><div class="line">  <span class="comment">// global variables.</span></div><div class="line">  <span class="keyword">let</span> a = b = c = <span class="number">1</span></div><div class="line">&#125;())</div><div class="line"></div><div class="line"><span class="built_in">console</span>.log(a) <span class="comment">// throws ReferenceError</span></div><div class="line"><span class="built_in">console</span>.log(b) <span class="comment">// 1</span></div><div class="line"><span class="built_in">console</span>.log(c) <span class="comment">// 1</span></div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line">(<span class="function"><span class="keyword">function</span> <span class="title">example</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">let</span> a = <span class="number">1</span></div><div class="line">  <span class="keyword">let</span> b = a</div><div class="line">  <span class="keyword">let</span> c = a</div><div class="line">&#125;())</div><div class="line"></div><div class="line"><span class="built_in">console</span>.log(a) <span class="comment">// throws ReferenceError</span></div><div class="line"><span class="built_in">console</span>.log(b) <span class="comment">// throws ReferenceError</span></div><div class="line"><span class="built_in">console</span>.log(c) <span class="comment">// throws ReferenceError</span></div><div class="line"></div><div class="line"><span class="comment">// the same applies for `const`</span></div></pre></td></tr></table></figure>
<ul>
<li>13.6 避免使用一元自增和自减(<code>++</code>，<code>--</code>)，eslint：<a href="http://eslint.org/docs/rules/no-plusplus" target="_blank" rel="external"><code>no-plusplus</code></a></li>
</ul>
<blockquote>
<p>每个 eslint 文档，一元的自增和自减语句会自动的插入分号，这样就会在程序中的增加或减少值时造成静默的错误。使用类似的 <code>num += 1</code> 修改变量替代 <code>num++</code> 或 <code>num ++</code> 更加具有表现性。禁用一元的自增和自减语句同样也可以避免由无意的预增加／预减小变量所造成的程序未预期的行为。</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// bad</span></div><div class="line"></div><div class="line"><span class="keyword">const</span> array = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</div><div class="line"><span class="keyword">let</span> num = <span class="number">1</span></div><div class="line">num++</div><div class="line">--num</div><div class="line"></div><div class="line"><span class="keyword">let</span> sum = <span class="number">0</span></div><div class="line"><span class="keyword">let</span> truthyCount = <span class="number">0</span></div><div class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span> i &lt; array.length i++) &#123;</div><div class="line">  <span class="keyword">let</span> value = array[i]</div><div class="line">  sum += value</div><div class="line">  <span class="keyword">if</span> (value) &#123;</div><div class="line">    truthyCount++</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line"></div><div class="line"><span class="keyword">const</span> array = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</div><div class="line"><span class="keyword">let</span> num = <span class="number">1</span></div><div class="line">num += <span class="number">1</span></div><div class="line">num -= <span class="number">1</span></div><div class="line"></div><div class="line"><span class="keyword">const</span> sum = array.reduce(<span class="function">(<span class="params">a, b</span>) =&gt;</span> a + b, <span class="number">0</span>)</div><div class="line"><span class="keyword">const</span> truthyCount = array.filter(<span class="built_in">Boolean</span>).length</div></pre></td></tr></table></figure>
<p><a href="#toc">目录</a><br><a name="hoisting"></a></p>
<h2 id="提升"><a href="#提升" class="headerlink" title="提升"></a>提升</h2><ul>
<li>14.1 <code>var</code> 声明提升至其作用域的最顶部，但是他的赋值并不会。<code>const</code> 和 <code>let</code> 声明引入了名为 <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/let#Temporal_dead_zone_and_errors_with_let" target="_blank" rel="external">Temporal Dead Zones (TDZ)</a> 的新的概念。必须注意 <a href="http://es-discourse.com/t/why-typeof-is-no-longer-safe/15" target="_blank" rel="external"><code>typeof</code> 不再安全</a>.</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line"> <span class="comment">// 下面的代码不能运行（假使没有名为notDefined的全局变量）</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">example</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="built_in">console</span>.log(notDefined) <span class="comment">// =&gt; throws a ReferenceError</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">// 由于变量提升的存在，在变量声明之前引用他时可以正常运行的。</span></div><div class="line"><span class="comment">// 但是赋值为 `true` 并没有被提升。</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">example</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="built_in">console</span>.log(declaredButNotAssigned) <span class="comment">// =&gt; undefined</span></div><div class="line">  <span class="keyword">var</span> declaredButNotAssigned = <span class="literal">true</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">// 解释器将变量提升到了作用域的最顶部，</span></div><div class="line"><span class="comment">// 意味着与下面的买作用相似。</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">example</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">let</span> declaredButNotAssigned</div><div class="line">  <span class="built_in">console</span>.log(declaredButNotAssigned) <span class="comment">// =&gt; undefined</span></div><div class="line">  declaredButNotAssigned = <span class="literal">true</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// using const and let</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">example</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="built_in">console</span>.log(declaredButNotAssigned) <span class="comment">// =&gt; throws a ReferenceError</span></div><div class="line">  <span class="built_in">console</span>.log(<span class="keyword">typeof</span> declaredButNotAssigned) <span class="comment">// =&gt; throws a ReferenceError</span></div><div class="line">  <span class="keyword">const</span> declaredButNotAssigned = <span class="literal">true</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>14.2 匿名的函数表达式会提升它们变量的名字，但是函数赋值并不会。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">  <span class="function"><span class="keyword">function</span> <span class="title">example</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="built_in">console</span>.log(anonymous) <span class="comment">// =&gt; undefined</span></div><div class="line"></div><div class="line">  anonymous() <span class="comment">// =&gt; TypeError anonymous is not a function</span></div><div class="line"></div><div class="line">  <span class="keyword">var</span> anonymous = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'anonymous function expression'</span>)</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>14.3 命名的函数表达式会提升变量名，而不是函数的名字也不是函数体。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">example</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="built_in">console</span>.log(named) <span class="comment">// =&gt; undefined</span></div><div class="line"></div><div class="line">  named() <span class="comment">// =&gt; TypeError named is not a function</span></div><div class="line"></div><div class="line">  superPower() <span class="comment">// =&gt; ReferenceError superPower is not defined</span></div><div class="line"></div><div class="line">  <span class="keyword">var</span> named = <span class="function"><span class="keyword">function</span> <span class="title">superPower</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'Flying'</span>)</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// the same is true when the function name</span></div><div class="line"><span class="comment">// is the same as the variable name.</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">example</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="built_in">console</span>.log(named) <span class="comment">// =&gt; undefined</span></div><div class="line"></div><div class="line">  named() <span class="comment">// =&gt; TypeError named is not a function</span></div><div class="line"></div><div class="line">  <span class="keyword">var</span> named = <span class="function"><span class="keyword">function</span> <span class="title">named</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'named'</span>)</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>14.4 函数声明同时会提示它们的名字和函数体。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">example</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  superPower() <span class="comment">// =&gt; Flying</span></div><div class="line"></div><div class="line">  <span class="function"><span class="keyword">function</span> <span class="title">superPower</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'Flying'</span>)</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>14.5 更多关于 <a href="http://www.adequatelygood.com/2010/2/JavaScript-Scoping-and-Hoisting/" target="_blank" rel="external">JavaScript 作用域 &amp; 提升</a> by <a href="http://www.adequatelygood.com/" target="_blank" rel="external">Ben Cherry</a>.</li>
</ul>
<p><a href="#toc">目录</a><br><a name="comparison-operators--equality"></a></p>
<h2 id="比较运算符和相等"><a href="#比较运算符和相等" class="headerlink" title="比较运算符和相等"></a>比较运算符和相等</h2><ul>
<li><p>15.1 使用 <code>===</code> 和 <code>！===</code> 替代 <code>==</code>，<code>!=</code>。eslint： <a href="http://eslint.org/docs/rules/eqeqeq.html" target="_blank" rel="external"><code>eqeqeq</code></a></p>
</li>
<li><p>15.3 条件表达式像 <code>if</code> 语句使用 <code>toBoolean</code> 的抽象方法枪支计算表达式的值。一般遵循下面几条规则：</p>
<ul>
<li><code>Object</code> 的值为 <code>true</code></li>
<li><code>undefined</code> 的值为 <code>false</code></li>
<li><code>null</code> 的值为 <code>false</code></li>
<li>布尔类型的值计算为布尔类型</li>
<li>值为 <code>+0</code>，<code>-0</code>，<code>NaN</code> 的<code>Number</code> 计算为 <code>false</code>，其他值为 <code>true</code></li>
<li>值为 <code>&#39;&#39;</code> 的字符串计算为 <code>false</code>，其他字符串值为 <code>true</code></li>
</ul>
</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">  <span class="keyword">if</span> ([<span class="number">0</span>] &amp;&amp; []) &#123;</div><div class="line">  <span class="comment">// true</span></div><div class="line">  <span class="comment">// 数组（即便是为空）是一个对象，对象会被计算为 true</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>15.3 对布尔使用简写法，但是在对字符和数值使用明确的表达式。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="keyword">if</span> (isValid === <span class="literal">true</span>) &#123;</div><div class="line">  <span class="comment">// ...</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line"><span class="keyword">if</span> (isValid) &#123;</div><div class="line">  <span class="comment">// ...</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="keyword">if</span> (name) &#123;</div><div class="line">  <span class="comment">// ...</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line"><span class="keyword">if</span> (name !== <span class="string">''</span>) &#123;</div><div class="line">  <span class="comment">// ...</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="keyword">if</span> (collection.length) &#123;</div><div class="line">  <span class="comment">// ...</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line"><span class="keyword">if</span> (collection.length &gt; <span class="number">0</span>) &#123;</div><div class="line">  <span class="comment">// ...</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li><p>15.4 更多参照 <a href="https://javascriptweblog.wordpress.com/2011/02/07/truth-equality-and-javascript/#more-2108" target="_blank" rel="external">Truth Equality and JavaScript</a> by Angus Croll。</p>
</li>
<li><p>15.5 在 <code>case</code> 和 <code>default</code> 中使用大括号创建包含词法声明的代码块。</p>
</li>
</ul>
<blockquote>
<p>Lexical declarations are visible in the entire <code>switch</code> block but only get initialized when assigned, which only happens when its <code>case</code> is reached. 词法声明在整个 <code>switch</code> 块中都是可以见的，但是只有在 <code>case</code>被执行时才会被赋值初始化。 当在多个 <code>case</code> 语句中是试图声明同一个变量时会出现问题。</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="keyword">switch</span> (foo) &#123;</div><div class="line">  <span class="keyword">case</span> <span class="number">1</span>:</div><div class="line">    <span class="keyword">let</span> x = <span class="number">1</span></div><div class="line">    <span class="keyword">break</span></div><div class="line">  <span class="keyword">case</span> <span class="number">2</span>:</div><div class="line">    <span class="keyword">const</span> y = <span class="number">2</span></div><div class="line">    <span class="keyword">break</span></div><div class="line">  <span class="keyword">case</span> <span class="number">3</span>:</div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params"></span>) </span>&#123;</div><div class="line">      <span class="comment">// ...</span></div><div class="line">    &#125;</div><div class="line">    <span class="keyword">break</span></div><div class="line">  <span class="keyword">default</span>:</div><div class="line">    <span class="class"><span class="keyword">class</span> <span class="title">C</span> </span>&#123;&#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line"><span class="keyword">switch</span> (foo) &#123;</div><div class="line">  <span class="keyword">case</span> <span class="number">1</span>: &#123;</div><div class="line">    <span class="keyword">let</span> x = <span class="number">1</span></div><div class="line">    <span class="keyword">break</span></div><div class="line">  &#125;</div><div class="line">  <span class="keyword">case</span> <span class="number">2</span>: &#123;</div><div class="line">    <span class="keyword">const</span> y = <span class="number">2</span></div><div class="line">    <span class="keyword">break</span></div><div class="line">  &#125;</div><div class="line">  <span class="keyword">case</span> <span class="number">3</span>: &#123;</div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params"></span>) </span>&#123;</div><div class="line">      <span class="comment">// ...</span></div><div class="line">    &#125;</div><div class="line">    <span class="keyword">break</span></div><div class="line">  &#125;</div><div class="line">  <span class="keyword">case</span> <span class="number">4</span>:</div><div class="line">    bar()</div><div class="line">    <span class="keyword">break</span></div><div class="line">  <span class="keyword">default</span>: &#123;</div><div class="line">    <span class="class"><span class="keyword">class</span> <span class="title">C</span> </span>&#123;&#125;</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>15.6 三元运算法不应该嵌套并且一般而言是单行表达式。eslint： <a href="http://eslint.org/docs/rules/no-nested-ternary.html" target="_blank" rel="external"><code>no-nested-ternary</code></a>.</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="keyword">const</span> foo = maybe1 &gt; maybe2</div><div class="line">  ? <span class="string">"bar"</span></div><div class="line">  : value1 &gt; value2 ? <span class="string">"baz"</span> : <span class="literal">null</span></div><div class="line"></div><div class="line"><span class="comment">// better</span></div><div class="line"><span class="keyword">const</span> maybeNull = value1 &gt; value2 ? <span class="string">'baz'</span> : <span class="literal">null</span></div><div class="line"></div><div class="line"><span class="keyword">const</span> foo = maybe1 &gt; maybe2</div><div class="line">  ? <span class="string">'bar'</span></div><div class="line">  : maybeNull</div><div class="line"></div><div class="line"><span class="comment">// best</span></div><div class="line"><span class="keyword">const</span> maybeNull = value1 &gt; value2 ? <span class="string">'baz'</span> : <span class="literal">null</span></div><div class="line"></div><div class="line"><span class="keyword">const</span> foo = maybe1 &gt; maybe2 ? <span class="string">'bar'</span> : maybeNull</div></pre></td></tr></table></figure>
<ul>
<li>15.7 避免非必要的三元表达式。eslint：<a href="http://eslint.org/docs/rules/no-unneeded-ternary.html" target="_blank" rel="external"><code>no-unneeded-ternary</code></a>.</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="keyword">const</span> foo = a ? a : b</div><div class="line"><span class="keyword">const</span> bar = c ? <span class="literal">true</span> : <span class="literal">false</span></div><div class="line"><span class="keyword">const</span> baz = c ? <span class="literal">false</span> : <span class="literal">true</span></div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line"><span class="keyword">const</span> foo = a || b</div><div class="line"><span class="keyword">const</span> bar = !!c</div><div class="line"><span class="keyword">const</span> baz = !c</div></pre></td></tr></table></figure>
<p><a href="#toc">目录</a><br><a name="blocks"></a></p>
<h2 id="块"><a href="#块" class="headerlink" title="块"></a>块</h2><ul>
<li>16.1 多行使用大括号。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"> <span class="comment">// bad</span></div><div class="line"><span class="keyword">if</span> (test)</div><div class="line">  <span class="keyword">return</span> <span class="literal">false</span></div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line"><span class="keyword">if</span> (test) <span class="keyword">return</span> <span class="literal">false</span></div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line"><span class="keyword">if</span> (test) &#123;</div><div class="line">  <span class="keyword">return</span> <span class="literal">false</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123; <span class="keyword">return</span> <span class="literal">false</span> &#125;</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">bar</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> <span class="literal">false</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>16.2 如果使用的 <code>if</code> 和 <code>else</code> 中有多行，把 <code>else</code> 放在 <code>if</code> 块结束的右大括号同一行。eslint：<a href="http://eslint.org/docs/rules/brace-style.html" target="_blank" rel="external"><code>brace-style</code></a></li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"> <span class="comment">// bad</span></div><div class="line"><span class="keyword">if</span> (test) &#123;</div><div class="line">  thing1()</div><div class="line">  thing2()</div><div class="line">&#125;</div><div class="line"><span class="keyword">else</span> &#123;</div><div class="line">  thing3()</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line"><span class="keyword">if</span> (test) &#123;</div><div class="line">  thing1()</div><div class="line">  thing2()</div><div class="line">&#125; <span class="keyword">else</span> &#123;</div><div class="line">  thing3()</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><a href="#toc">目录</a><br><a name="control-statements"></a></p>
<h2 id="控制语句"><a href="#控制语句" class="headerlink" title="控制语句"></a>控制语句</h2><ul>
<li>17.1 当控制语句(<code>if</code>,<code>while</code> etc.)很长或者超过了最大列数，可以将每个条件放在新的一行，逻辑操作符在行首活着行为取决于开发者。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="keyword">if</span> ((foo === <span class="number">123</span> || bar === <span class="string">'abc'</span>) &amp;&amp; doesItLookGoodWhenItBecomesThatLong() &amp;&amp; isThisReallyHappening()) &#123;</div><div class="line">  thing1()</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="keyword">if</span> (foo === <span class="number">123</span> &amp;&amp;</div><div class="line">  bar === <span class="string">'abc'</span>) &#123;</div><div class="line">  thing1()</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="keyword">if</span> (foo === <span class="number">123</span></div><div class="line">  &amp;&amp; bar === <span class="string">'abc'</span>) &#123;</div><div class="line">  thing1()</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line"><span class="keyword">if</span> (</div><div class="line">  (foo === <span class="number">123</span> || bar === <span class="string">"abc"</span>) &amp;&amp;</div><div class="line">  doesItLookGoodWhenItBecomesThatLong() &amp;&amp;</div><div class="line">  isThisReallyHappening()</div><div class="line">) &#123;</div><div class="line">  thing1()</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line"><span class="keyword">if</span> (foo === <span class="number">123</span> &amp;&amp; bar === <span class="string">'abc'</span>) &#123;</div><div class="line">  thing1()</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line"><span class="keyword">if</span> (</div><div class="line">  foo === <span class="number">123</span> &amp;&amp;</div><div class="line">  bar === <span class="string">'abc'</span></div><div class="line">) &#123;</div><div class="line">  thing1()</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line"><span class="keyword">if</span> (</div><div class="line">  foo === <span class="number">123</span></div><div class="line">  &amp;&amp; bar === <span class="string">'abc'</span></div><div class="line">) &#123;</div><div class="line">  thing1()</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><a href="#toc">目录</a><br><a name="comments"></a></p>
<h2 id="注释"><a href="#注释" class="headerlink" title="注释"></a>注释</h2><ul>
<li>18.1 多行注释使用 <code>/**...*/</code> </li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="comment">// make() returns a new element</span></div><div class="line"><span class="comment">// based on the passed in tag name</span></div><div class="line"><span class="comment">//</span></div><div class="line"><span class="comment">// @param &#123;String&#125; tag</span></div><div class="line"><span class="comment">// @return &#123;Element&#125; element</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">make</span>(<span class="params">tag</span>) </span>&#123;</div><div class="line"></div><div class="line">  <span class="comment">// ...</span></div><div class="line"></div><div class="line">  <span class="keyword">return</span> element</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line"><span class="comment">/**</span></div><div class="line"> * make() returns a new element</div><div class="line"> * based on the passed-in tag name</div><div class="line"> */</div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">make</span>(<span class="params">tag</span>) </span>&#123;</div><div class="line"></div><div class="line">  <span class="comment">// ...</span></div><div class="line"></div><div class="line">  <span class="keyword">return</span> element</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>18.2 使用 <code>//</code> 进行单行注释。在被注释的对象上新的一行添加注释。除非是块的首行，否者在注释上方应该添加一空行。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="keyword">const</span> active = <span class="literal">true</span>  <span class="comment">// is current tab</span></div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line"><span class="comment">// is current tab</span></div><div class="line"><span class="keyword">const</span> active = <span class="literal">true</span></div><div class="line"></div><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">getType</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="built_in">console</span>.log(<span class="string">'fetching type...'</span>)</div><div class="line">  <span class="comment">// set the default type to 'no type'</span></div><div class="line">  <span class="keyword">const</span> type = <span class="keyword">this</span>.type || <span class="string">'no type'</span></div><div class="line"></div><div class="line">  <span class="keyword">return</span> type</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">getType</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="built_in">console</span>.log(<span class="string">'fetching type...'</span>)</div><div class="line"></div><div class="line">  <span class="comment">// set the default type to 'no type'</span></div><div class="line">  <span class="keyword">const</span> type = <span class="keyword">this</span>.type || <span class="string">'no type'</span></div><div class="line"></div><div class="line">  <span class="keyword">return</span> type</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// also good</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">getType</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="comment">// set the default type to 'no type'</span></div><div class="line">  <span class="keyword">const</span> type = <span class="keyword">this</span>.type || <span class="string">'no type'</span></div><div class="line"></div><div class="line">  <span class="keyword">return</span> type</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>18.3 所有的注释起始位置添加一空格增加可读性。eslint：<a href="http://eslint.org/docs/rules/spaced-comment" target="_blank" rel="external"><code>spaced-comment</code></a></li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="comment">//is current tab</span></div><div class="line"><span class="keyword">const</span> active = <span class="literal">true</span></div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line"><span class="comment">// is current tab</span></div><div class="line"><span class="keyword">const</span> active = <span class="literal">true</span></div><div class="line"></div><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="comment">/**</span></div><div class="line"> *make() returns a new element</div><div class="line"> *based on the passed-in tag name</div><div class="line"> */</div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">make</span>(<span class="params">tag</span>) </span>&#123;</div><div class="line"></div><div class="line">  <span class="comment">// ...</span></div><div class="line"></div><div class="line">  <span class="keyword">return</span> element</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line"><span class="comment">/**</span></div><div class="line"> * make() returns a new element</div><div class="line"> * based on the passed-in tag name</div><div class="line"> */</div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">make</span>(<span class="params">tag</span>) </span>&#123;</div><div class="line"></div><div class="line">  <span class="comment">// ...</span></div><div class="line"></div><div class="line">  <span class="keyword">return</span> element</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li><p>18.4 在注释前添加 <code>FIXME</code> 或着 <code>TODO</code> 可以帮助其他开发成员快速的理解当前开发者是要对一个问题是否要重新审查亦或者需要一个解决问题的实现方式。由于这些都是可操作的，所以与其他一般的注释并不相同。这些操作是：<code>FIXME: -- need to figure this out</code> 或 <code>TODO: -- need to implement</code>。</p>
</li>
<li><p>18.5 使用 <code>// FIXME:</code> 注解问题。</p>
</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Calculator</span> <span class="keyword">extends</span> <span class="title">Abacus</span> </span>&#123;</div><div class="line">  <span class="keyword">constructor</span>() &#123;</div><div class="line">    <span class="keyword">super</span>()</div><div class="line"></div><div class="line">    <span class="comment">// <span class="doctag">FIXME:</span> shouldn’t use a global here</span></div><div class="line">    total = <span class="number">0</span></div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>18.6 使用 <code>// TODO:</code> 注解解决问题。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Calculator</span> <span class="keyword">extends</span> <span class="title">Abacus</span> </span>&#123;</div><div class="line">  <span class="keyword">constructor</span>() &#123;</div><div class="line">    <span class="keyword">super</span>()</div><div class="line"></div><div class="line">    <span class="comment">// <span class="doctag">TODO:</span> total should be configurable by an options param</span></div><div class="line">    <span class="keyword">this</span>.total = <span class="number">0</span></div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><a href="#toc">目录</a><br><a name="whitespace"></a></p>
<h2 id="空白"><a href="#空白" class="headerlink" title="空白"></a>空白</h2><ul>
<li>19.1 使用两个空格的软制表符（空格）。eslint： <a href="http://eslint.org/docs/rules/indent.html" target="_blank" rel="external"><code>indent</code></a></li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;</div><div class="line">∙∙∙∙<span class="keyword">let</span> name</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">bar</span>(<span class="params"></span>) </span>&#123;</div><div class="line">∙<span class="keyword">let</span> name</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">baz</span>(<span class="params"></span>) </span>&#123;</div><div class="line">∙∙<span class="keyword">let</span> name</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>19.2 左大括号前添加一个空格。 eslint：<a href="http://eslint.org/docs/rules/space-before-blocks.html" target="_blank" rel="external"><code>space-before-blocks</code></a></li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params"></span>)</span>&#123;</div><div class="line">  <span class="built_in">console</span>.log(<span class="string">'test'</span>)</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="built_in">console</span>.log(<span class="string">'test'</span>)</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// bad</span></div><div class="line">dog.set(<span class="string">'attr'</span>,&#123;</div><div class="line">  <span class="attr">age</span>: <span class="string">'1 year'</span>,</div><div class="line">  <span class="attr">breed</span>: <span class="string">'Bernese Mountain Dog'</span>,</div><div class="line">&#125;)</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line">dog.set(<span class="string">'attr'</span>, &#123;</div><div class="line">  <span class="attr">age</span>: <span class="string">'1 year'</span>,</div><div class="line">  <span class="attr">breed</span>: <span class="string">'Bernese Mountain Dog'</span>,</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<ul>
<li>19.3 在控制语句（<code>if</code>,<code>while</code>, etc.）的左小括号前添加一个空格。在函数调用和声明时参数列表和函数名称与小括号之间不要添加空格。 eslint：<a href="http://eslint.org/docs/rules/keyword-spacing.html" target="_blank" rel="external"><code>keyword-spacing</code></a></li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="keyword">if</span>(isJedi) &#123;</div><div class="line">  fight ()</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line"><span class="keyword">if</span> (isJedi) &#123;</div><div class="line">  fight()</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">fight</span> (<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="built_in">console</span>.log (<span class="string">'Swooosh!'</span>)</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">fight</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="built_in">console</span>.log(<span class="string">'Swooosh!'</span>)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>19.4 操作符之间添加空格。 eslint： <a href="http://eslint.org/docs/rules/space-infix-ops.html" target="_blank" rel="external"><code>space-infix-ops</code></a></li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"> <span class="comment">// bad</span></div><div class="line"><span class="keyword">const</span> x=y+<span class="number">5</span></div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line"><span class="keyword">const</span> x = y + <span class="number">5</span></div></pre></td></tr></table></figure>
<ul>
<li>19.5 文件的结尾处添加一换行符。eslint： <a href="https://github.com/eslint/eslint/blob/master/docs/rules/eol-last.md" target="_blank" rel="external"><code>eol-last</code></a></li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="keyword">import</span> &#123; es6 &#125; <span class="keyword">from</span> <span class="string">'./AirbnbStyleGuide'</span></div><div class="line">  <span class="comment">// ...</span></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> es6</div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="keyword">import</span> &#123; es6 &#125; <span class="keyword">from</span> <span class="string">'./AirbnbStyleGuide'</span></div><div class="line">  <span class="comment">// ...</span></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> es6↵</div><div class="line">↵</div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// good</span></div><div class="line"><span class="keyword">import</span> &#123; es6 &#125; <span class="keyword">from</span> <span class="string">'./AirbnbStyleGuide'</span></div><div class="line">  <span class="comment">// ...</span></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> es6↵</div></pre></td></tr></table></figure>
<ul>
<li>19.6 多个链式调用时使用缩进（两个以上的方法）。以点 <code>.</code> 开头，以强调改行是一个方法调用，未不是一个表达式。eslint： <a href="http://eslint.org/docs/rules/newline-per-chained-call" target="_blank" rel="external"><code>newline-per-chained-call</code></a> <a href="http://eslint.org/docs/rules/no-whitespace-before-property" target="_blank" rel="external"><code>no-whitespace-before-property</code></a></li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// bad</span></div><div class="line">$(<span class="string">'#items'</span>).find(<span class="string">'.selected'</span>).highlight().end().find(<span class="string">'.open'</span>).updateCount()</div><div class="line"></div><div class="line"><span class="comment">// bad</span></div><div class="line">$(<span class="string">'#items'</span>).</div><div class="line">  find(<span class="string">'.selected'</span>).</div><div class="line">    highlight().</div><div class="line">    end().</div><div class="line">  find(<span class="string">'.open'</span>).</div><div class="line">    updateCount()</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line">$(<span class="string">'#items'</span>)</div><div class="line">  .find(<span class="string">'.selected'</span>)</div><div class="line">    .highlight()</div><div class="line">    .end()</div><div class="line">  .find(<span class="string">'.open'</span>)</div><div class="line">    .updateCount()</div><div class="line"></div><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="keyword">const</span> leds = stage.selectAll(<span class="string">'.led'</span>).data(data).enter().append(<span class="string">'svg:svg'</span>).classed(<span class="string">'led'</span>, <span class="literal">true</span>)</div><div class="line">    .attr(<span class="string">'width'</span>, (radius + margin) * <span class="number">2</span>).append(<span class="string">'svg:g'</span>)</div><div class="line">    .attr(<span class="string">'transform'</span>, <span class="string">`translate(<span class="subst">$&#123;radius + margin&#125;</span>,<span class="subst">$&#123;radius + margin&#125;</span>)`</span>)</div><div class="line">    .call(tron.led)</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line"><span class="keyword">const</span> leds = stage.selectAll(<span class="string">'.led'</span>)</div><div class="line">    .data(data)</div><div class="line">  .enter().append(<span class="string">'svg:svg'</span>)</div><div class="line">    .classed(<span class="string">'led'</span>, <span class="literal">true</span>)</div><div class="line">    .attr(<span class="string">'width'</span>, (radius + margin) * <span class="number">2</span>)</div><div class="line">  .append(<span class="string">'svg:g'</span>)</div><div class="line">    .attr(<span class="string">'transform'</span>, <span class="string">`translate(<span class="subst">$&#123;radius + margin&#125;</span>,<span class="subst">$&#123;radius + margin&#125;</span>)`</span>)</div><div class="line">    .call(tron.led)</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line"><span class="keyword">const</span> leds = stage.selectAll(<span class="string">'.led'</span>).data(data)</div></pre></td></tr></table></figure>
<ul>
<li>19.7 块之后，新表达式之前添加一空行。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="keyword">if</span> (foo) &#123;</div><div class="line">  <span class="keyword">return</span> bar</div><div class="line">&#125;</div><div class="line"><span class="keyword">return</span> baz</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line"><span class="keyword">if</span> (foo) &#123;</div><div class="line">  <span class="keyword">return</span> bar</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">return</span> baz</div><div class="line"></div><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="keyword">const</span> obj = &#123;</div><div class="line">  foo() &#123;</div><div class="line">  &#125;,</div><div class="line">  bar() &#123;</div><div class="line">  &#125;,</div><div class="line">&#125;</div><div class="line"><span class="keyword">return</span> obj</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line"><span class="keyword">const</span> obj = &#123;</div><div class="line">  foo() &#123;</div><div class="line">  &#125;,</div><div class="line"></div><div class="line">  bar() &#123;</div><div class="line">  &#125;,</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">return</span> obj</div><div class="line"></div><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="keyword">const</span> arr = [</div><div class="line">  <span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  &#125;,</div><div class="line">  <span class="function"><span class="keyword">function</span> <span class="title">bar</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  &#125;,</div><div class="line">]</div><div class="line"><span class="keyword">return</span> arr</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line"><span class="keyword">const</span> arr = [</div><div class="line">  <span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  &#125;,</div><div class="line"></div><div class="line">  <span class="function"><span class="keyword">function</span> <span class="title">bar</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  &#125;,</div><div class="line">]</div><div class="line"></div><div class="line"><span class="keyword">return</span> arr</div></pre></td></tr></table></figure>
<ul>
<li>19.8 块内的开始和结束位置不要添加空行。 eslint： <a href="http://eslint.org/docs/rules/padded-blocks.html" target="_blank" rel="external"><code>padded-blocks</code></a></li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">bar</span>(<span class="params"></span>) </span>&#123;</div><div class="line"></div><div class="line">  <span class="built_in">console</span>.log(foo)</div><div class="line"></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// also bad</span></div><div class="line"><span class="keyword">if</span> (baz) &#123;</div><div class="line"></div><div class="line">  <span class="built_in">console</span>.log(qux)</div><div class="line">&#125; <span class="keyword">else</span> &#123;</div><div class="line">  <span class="built_in">console</span>.log(foo)</div><div class="line"></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">bar</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="built_in">console</span>.log(foo)</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line"><span class="keyword">if</span> (baz) &#123;</div><div class="line">  <span class="built_in">console</span>.log(qux)</div><div class="line">&#125; <span class="keyword">else</span> &#123;</div><div class="line">  <span class="built_in">console</span>.log(foo)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>19.9 小括号内部的开始和结束出不要添加空格。eslint： <a href="http://eslint.org/docs/rules/space-in-parens.html" target="_blank" rel="external"><code>space-in-parens</code></a></li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">  <span class="comment">// bad</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">bar</span>(<span class="params"> foo </span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> foo</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">bar</span>(<span class="params">foo</span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> foo</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="keyword">if</span> ( foo ) &#123;</div><div class="line">  <span class="built_in">console</span>.log(foo)</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line"><span class="keyword">if</span> (foo) &#123;</div><div class="line">  <span class="built_in">console</span>.log(foo)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>19.10 中括号内部的开始和结束出不要添加空格。eslint： <a href="http://eslint.org/docs/rules/array-bracket-spacing.html" target="_blank" rel="external"><code>array-bracket-spacing</code></a></li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="keyword">const</span> foo = [ <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span> ]</div><div class="line"><span class="built_in">console</span>.log(foo[ <span class="number">0</span> ])</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line"><span class="keyword">const</span> foo = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</div><div class="line"><span class="built_in">console</span>.log(foo[<span class="number">0</span>])</div></pre></td></tr></table></figure>
<ul>
<li>19.11 大括号内部的开始和结束出不要添加空格。eslint： <a href="http://eslint.org/docs/rules/object-curly-spacing.html" target="_blank" rel="external"><code>object-curly-spacing</code></a></li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"> <span class="comment">// bad</span></div><div class="line"><span class="keyword">const</span> foo = &#123;<span class="attr">clark</span>: <span class="string">'kent'</span>&#125;</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line"><span class="keyword">const</span> foo = &#123; <span class="attr">clark</span>: <span class="string">'kent'</span> &#125;</div></pre></td></tr></table></figure>
<ul>
<li>19.12 避免每行的的字符数超过 100 个字符（包括空格）。除了 6.2 中长字符并不适用于这条规则，其他的应该换行。eslint：<a href="http://eslint.org/docs/rules/max-len.html" target="_blank" rel="external"><code>max-len</code></a></li>
</ul>
<blockquote>
<p>增加可读性和可维护性。</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"> <span class="comment">// bad</span></div><div class="line"><span class="keyword">const</span> foo = jsonData &amp;&amp; jsonData.foo &amp;&amp; jsonData.foo.bar &amp;&amp; jsonData.foo.bar.baz &amp;&amp; jsonData.foo.bar.baz.quux &amp;&amp; jsonData.foo.bar.baz.quux.xyzzy</div><div class="line"></div><div class="line"><span class="comment">// bad</span></div><div class="line">$.ajax(&#123; <span class="attr">method</span>: <span class="string">'POST'</span>, <span class="attr">url</span>: <span class="string">'https://airbnb.com/'</span>, <span class="attr">data</span>: &#123; <span class="attr">name</span>: <span class="string">'John'</span> &#125; &#125;).done(<span class="function"><span class="params">()</span> =&gt;</span> <span class="built_in">console</span>.log(<span class="string">'Congratulations!'</span>)).fail(<span class="function"><span class="params">()</span> =&gt;</span> <span class="built_in">console</span>.log(<span class="string">'You have failed this city.'</span>))</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line"><span class="keyword">const</span> foo = jsonData</div><div class="line">  &amp;&amp; jsonData.foo</div><div class="line">  &amp;&amp; jsonData.foo.bar</div><div class="line">  &amp;&amp; jsonData.foo.bar.baz</div><div class="line">  &amp;&amp; jsonData.foo.bar.baz.quux</div><div class="line">  &amp;&amp; jsonData.foo.bar.baz.quux.xyzzy</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line">$.ajax(&#123;</div><div class="line">  <span class="attr">method</span>: <span class="string">'POST'</span>,</div><div class="line">  <span class="attr">url</span>: <span class="string">'https://airbnb.com/'</span>,</div><div class="line">  <span class="attr">data</span>: &#123; <span class="attr">name</span>: <span class="string">'John'</span> &#125;,</div><div class="line">&#125;)</div><div class="line">  .done(<span class="function"><span class="params">()</span> =&gt;</span> <span class="built_in">console</span>.log(<span class="string">'Congratulations!'</span>))</div><div class="line">  .fail(<span class="function"><span class="params">()</span> =&gt;</span> <span class="built_in">console</span>.log(<span class="string">'You have failed this city.'</span>))</div></pre></td></tr></table></figure>
<p><a href="#toc">目录</a><br><a name="commas"></a></p>
<h2 id="逗号"><a href="#逗号" class="headerlink" title="逗号"></a>逗号</h2><ul>
<li>20.1 前导逗号。eslint： <a href="http://eslint.org/docs/rules/comma-style.html" target="_blank" rel="external"><code>comma-style</code></a> </li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line"> <span class="comment">// bad</span></div><div class="line"><span class="keyword">const</span> story = [</div><div class="line">    once</div><div class="line">  , upon</div><div class="line">  , aTime</div><div class="line">]</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line"><span class="keyword">const</span> story = [</div><div class="line">  once,</div><div class="line">  upon,</div><div class="line">  aTime,</div><div class="line">]</div><div class="line"></div><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="keyword">const</span> hero = &#123;</div><div class="line">    <span class="attr">firstName</span>: <span class="string">'Ada'</span></div><div class="line">  , <span class="attr">lastName</span>: <span class="string">'Lovelace'</span></div><div class="line">  , <span class="attr">birthYear</span>: <span class="number">1815</span></div><div class="line">  , <span class="attr">superPower</span>: <span class="string">'computers'</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line"><span class="keyword">const</span> hero = &#123;</div><div class="line">  <span class="attr">firstName</span>: <span class="string">'Ada'</span>,</div><div class="line">  <span class="attr">lastName</span>: <span class="string">'Lovelace'</span>,</div><div class="line">  <span class="attr">birthYear</span>: <span class="number">1815</span>,</div><div class="line">  <span class="attr">superPower</span>: <span class="string">'computers'</span>,</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><a href="#toc">目录</a><br><a name="semicolons"></a></p>
<h2 id="分号"><a href="#分号" class="headerlink" title="分号"></a>分号</h2><ul>
<li>21.1 不需要分号。eslint： <a href="http://eslint.org/docs/rules/semi.html" target="_blank" rel="external"><code>semi</code></a></li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// bad</span></div><div class="line">(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">const</span> name = <span class="string">'Skywalker'</span>;</div><div class="line">  <span class="keyword">return</span> name;</div><div class="line">&#125;)()</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line">(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">const</span> name = <span class="string">'Skywalker'</span></div><div class="line">  <span class="keyword">return</span> name</div><div class="line">&#125;())</div></pre></td></tr></table></figure>
<p><a href="#toc">目录</a><br><a name="type-casting--coercion"></a></p>
<h2 id="类型强制转换"><a href="#类型强制转换" class="headerlink" title="类型强制转换"></a>类型强制转换</h2><ul>
<li><p>22.1 在表达式的开始出进行强制转换。</p>
</li>
<li><p>22.2 字符串</p>
</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// =&gt; this.reviewScore = 9</span></div><div class="line"></div><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="keyword">const</span> totalScore = <span class="keyword">this</span>.reviewScore + <span class="string">''</span> <span class="comment">// invokes this.reviewScore.valueOf()</span></div><div class="line"></div><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="keyword">const</span> totalScore = <span class="keyword">this</span>.reviewScore.toString() <span class="comment">// isn’t guaranteed to return a string</span></div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line"><span class="keyword">const</span> totalScore = <span class="built_in">String</span>(<span class="keyword">this</span>.reviewScore)</div></pre></td></tr></table></figure>
<ul>
<li>22.3 数字：使用 <code>Number</code> 进行类型转换，<code>parseInt</code> 在转换字符串时，添加进制参数。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> inputValue = <span class="string">'4'</span></div><div class="line"></div><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="keyword">const</span> val = <span class="keyword">new</span> <span class="built_in">Number</span>(inputValue)</div><div class="line"></div><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="keyword">const</span> val = +inputValue</div><div class="line"></div><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="keyword">const</span> val = inputValue &gt;&gt; <span class="number">0</span></div><div class="line"></div><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="keyword">const</span> val = <span class="built_in">parseInt</span>(inputValue)</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line"><span class="keyword">const</span> val = <span class="built_in">Number</span>(inputValue)</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line"><span class="keyword">const</span> val = <span class="built_in">parseInt</span>(inputValue, <span class="number">10</span>)</div></pre></td></tr></table></figure>
<ul>
<li>22.4 如果基于某种原因，<code>parseInt</code> 是代码的瓶颈，需要使用移位操作<a href="https://jsperf.com/coercion-vs-casting/3" target="_blank" rel="external">提高性能</a> ，请为此段代码添加注释。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// good</span></div><div class="line"><span class="comment">/**</span></div><div class="line"> * parseInt was the reason my code was slow.</div><div class="line"> * Bitshifting the String to coerce it to a</div><div class="line"> * Number made it a lot faster.</div><div class="line"> */</div><div class="line"><span class="keyword">const</span> val = inputValue &gt;&gt; <span class="number">0</span></div></pre></td></tr></table></figure>
<ul>
<li>22.5 使用以为操作符时一定要格外小心。数字（<code>Number</code>）是以 <a href="https://es5.github.io/#x4.3.19" target="_blank" rel="external">64-bit</a> 表示的，但是移位操作时返回 32 位整型(<a href="https://es5.github.io/#x11.7" target="_blank" rel="external">source</a>)。移位操作会导致未预期的行为，因为整型的值整型是大于 32 位的。<a href="https://github.com/airbnb/javascript/issues/109" target="_blank" rel="external">Discussion</a>。最大的 32 位的有符号整型的大小是 2,147,483,647：</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="number">2147483647</span> &gt;&gt; <span class="number">0</span> <span class="comment">// =&gt; 2147483647</span></div><div class="line"><span class="number">2147483648</span> &gt;&gt; <span class="number">0</span> <span class="comment">// =&gt; -2147483648</span></div><div class="line"><span class="number">2147483649</span> &gt;&gt; <span class="number">0</span> <span class="comment">// =&gt; -2147483647</span></div></pre></td></tr></table></figure>
<ul>
<li>22.6 布尔类型：</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> age = <span class="number">0</span></div><div class="line"></div><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="keyword">const</span> hasAge = <span class="keyword">new</span> <span class="built_in">Boolean</span>(age)</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line"><span class="keyword">const</span> hasAge = <span class="built_in">Boolean</span>(age)</div><div class="line"></div><div class="line"><span class="comment">// best</span></div><div class="line"><span class="keyword">const</span> hasAge = !!age</div></pre></td></tr></table></figure>
<p><a href="#toc">目录</a><br><a name="naming-conventions"></a></p>
<h2 id="命名规则"><a href="#命名规则" class="headerlink" title="命名规则"></a>命名规则</h2><ul>
<li>23.1 避免使用单个字母。命名一定要有意义。eslint： <a href="http://eslint.org/docs/rules/id-length" target="_blank" rel="external"><code>id-length</code></a></li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"> <span class="comment">// bad</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">q</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="comment">// ...</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">query</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="comment">// ...</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>23.2 对象，函数，实例的命名使用驼峰命名法。eslint： <a href="http://eslint.org/docs/rules/camelcase.html" target="_blank" rel="external"><code>camelcase</code></a></li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="keyword">const</span> OBJEcttsssss = &#123;&#125;</div><div class="line"><span class="keyword">const</span> this_is_my_object = &#123;&#125;</div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">c</span>(<span class="params"></span>) </span>&#123;&#125;</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line"><span class="keyword">const</span> thisIsMyObject = &#123;&#125;</div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">thisIsMyFunction</span>(<span class="params"></span>) </span>&#123;&#125;</div></pre></td></tr></table></figure>
<ul>
<li>23.3 只有在命名构造函数或类时使用帕斯卡命名法(PascalCase)。 eslint： <a href="http://eslint.org/docs/rules/new-cap.html" target="_blank" rel="external"><code>new-cap</code></a> </li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">user</span>(<span class="params">options</span>) </span>&#123;</div><div class="line">  <span class="keyword">this</span>.name = options.name</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">const</span> bad = <span class="keyword">new</span> user(&#123;</div><div class="line">  <span class="attr">name</span>: <span class="string">'nope'</span>,</div><div class="line">&#125;)</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</div><div class="line">  <span class="keyword">constructor</span>(options) &#123;</div><div class="line">    <span class="keyword">this</span>.name = options.name</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">const</span> good = <span class="keyword">new</span> User(&#123;</div><div class="line">  <span class="attr">name</span>: <span class="string">'yup'</span>,</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<ul>
<li>23.4 不要以下划线开始或结束。eslint： <a href="http://eslint.org/docs/rules/no-underscore-dangle.html" target="_blank" rel="external"><code>no-underscore-dangle</code></a></li>
</ul>
<blockquote>
<p>JavaScript 属性或方法中并没有私有的概念。尽管如此，下划线是私有的一种共同惯例，然而事实上这些属性如同你的公共 API 一样仍然是公开的。这样的惯例可能会导致开发者错误地认为使用其并不会导致任何问题。所以如果想要让其私有，它就应该完全的不存在。</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="keyword">this</span>.__firstName__ = <span class="string">'Panda'</span></div><div class="line"><span class="keyword">this</span>.firstName_ = <span class="string">'Panda'</span></div><div class="line"><span class="keyword">this</span>._firstName = <span class="string">'Panda'</span></div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line"><span class="keyword">this</span>.firstName = <span class="string">'Panda'</span></div></pre></td></tr></table></figure>
<ul>
<li>23.5 不要保存 <code>this</code> 的引用，使用箭头函数亦或是 <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function/bind" target="_blank" rel="external">Function#bind</a></li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">const</span> self = <span class="keyword">this</span></div><div class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(self)</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">const</span> that = <span class="keyword">this</span></div><div class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(that)</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> <span class="function"><span class="params">()</span> =&gt;</span> &#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>)</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>23.6 当导出构造函数／类／单例／函数／库／对象时，使用帕斯卡命名法(PascalCase)。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"> <span class="keyword">const</span> AirbnbStyleGuide = &#123;</div><div class="line">  <span class="attr">es6</span>: &#123;</div><div class="line">  &#125;,</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> AirbnbStyleGuide</div></pre></td></tr></table></figure>
<ul>
<li>23.7 缩略语要么全大写，要么全小写。</li>
</ul>
<blockquote>
<p>命名是为了可读性，并不是为了照顾机器。</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="keyword">import</span> SmsContainer <span class="keyword">from</span> <span class="string">'./containers/SmsContainer'</span></div><div class="line"></div><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="keyword">const</span> HttpRequests = [</div><div class="line">  <span class="comment">// ...</span></div><div class="line">]</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line"><span class="keyword">import</span> SMSContainer <span class="keyword">from</span> <span class="string">'./containers/SMSContainer'</span></div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line"><span class="keyword">const</span> HTTPRequests = [</div><div class="line">  <span class="comment">// ...</span></div><div class="line">]</div><div class="line"></div><div class="line"><span class="comment">// best</span></div><div class="line"><span class="keyword">import</span> TextMessageContainer <span class="keyword">from</span> <span class="string">'./containers/TextMessageContainer'</span></div><div class="line"></div><div class="line"><span class="comment">// best</span></div><div class="line"><span class="keyword">const</span> Requests = [</div><div class="line">  <span class="comment">// ...</span></div><div class="line">]</div></pre></td></tr></table></figure>
<p><a href="#toc">目录</a><br><a name="accessors"></a></p>
<h2 id="访问器"><a href="#访问器" class="headerlink" title="访问器"></a>访问器</h2><ul>
<li><p>24.1 访问器函数并不是必备的。</p>
</li>
<li><p>24.2 不要使用 JavaScript 的 getters/setters，这是因为他们会造成未预期的副作用，并且难以测试，维护等等。最为替代，自己创建类似于 getVal() 或 setVal(‘Hello’) 的访问器函数。</p>
</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Dragon</span> </span>&#123;</div><div class="line">  get age() &#123;</div><div class="line">    <span class="comment">// ...</span></div><div class="line">  &#125;</div><div class="line"></div><div class="line">  set age(value) &#123;</div><div class="line">    <span class="comment">// ...</span></div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Dragon</span> </span>&#123;</div><div class="line">  getAge() &#123;</div><div class="line">    <span class="comment">// ...</span></div><div class="line">  &#125;</div><div class="line"></div><div class="line">  setAge(value) &#123;</div><div class="line">    <span class="comment">// ...</span></div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>24.3 如果属性或方法是 <code>boolean</code>，使用 <code>isValue()</code> 或 <code>hasVal()</code>。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="keyword">if</span> (!dragon.age()) &#123;</div><div class="line">  <span class="keyword">return</span> <span class="literal">false</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line"><span class="keyword">if</span> (!dragon.hasAge()) &#123;</div><div class="line">  <span class="keyword">return</span> <span class="literal">false</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>24.4 是可以创建 get() 和 set() 的，但是要保持一致。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Jedi</span> </span>&#123;</div><div class="line">  <span class="keyword">constructor</span>(options = &#123;&#125;) &#123;</div><div class="line">    <span class="keyword">const</span> lightsaber = options.lightsaber || <span class="string">'blue'</span></div><div class="line">    <span class="keyword">this</span>.set(<span class="string">'lightsaber'</span>, lightsaber)</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  set(key, val) &#123;</div><div class="line">    <span class="keyword">this</span>[key] = val</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  get(key) &#123;</div><div class="line">    <span class="keyword">return</span> <span class="keyword">this</span>[key]</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><a href="#toc">目录</a><br><a name="events"></a></p>
<h2 id="事件"><a href="#事件" class="headerlink" title="事件"></a>事件</h2><ul>
<li>25.1 当从事件中取得数据体时（ DOM 事件或者是其他像 Backbone 类似的事件），传递散列值而不是原始值。这样可以使会许的开发者可以添加更多的数据到事件数据体中，而不用为每个事件查找和更新回调。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// bad</span></div><div class="line">$(<span class="keyword">this</span>).trigger(<span class="string">'listingUpdated'</span>, listing.id)</div><div class="line"></div><div class="line"><span class="comment">// ...</span></div><div class="line"></div><div class="line">$(<span class="keyword">this</span>).on(<span class="string">'listingUpdated'</span>, (e, listingId) =&gt; &#123;</div><div class="line">  <span class="comment">// do something with listingId</span></div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<p>prefer:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// good</span></div><div class="line">$(<span class="keyword">this</span>).trigger(<span class="string">'listingUpdated'</span>, &#123; <span class="attr">listingId</span>: listing.id &#125;)</div><div class="line"></div><div class="line"><span class="comment">// ...</span></div><div class="line"></div><div class="line">$(<span class="keyword">this</span>).on(<span class="string">'listingUpdated'</span>, (e, data) =&gt; &#123;</div><div class="line">  <span class="comment">// do something with data.listingId</span></div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<p><a href="#toc">目录</a><br><a name="resources"></a></p>
<h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><p><a href="https://github.com/airbnb/javascript" target="_blank" rel="external">Airbnb JavaScript Style GuideLine</a></p>

      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        

      
    </div>

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/JavaScript/" rel="tag"># JavaScript</a>
          
            <a href="/tags/Check-Style/" rel="tag"># Check Style</a>
          
            <a href="/tags/Guide-Line/" rel="tag"># Guide Line</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2017/07/28/React-Guide-Line/" rel="next" title="React-Guide-Line">
                <i class="fa fa-chevron-left"></i> React-Guide-Line
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
          </div>
        </div>
      

      
      
    </footer>
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          
  <div class="comments" id="comments">
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/avatar.jpg"
               alt="梦" />
          <p class="site-author-name" itemprop="name">梦</p>
           
              <p class="site-description motion-element" itemprop="description"></p>
          
        </div>
        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
              <a href="/archives/">
                <span class="site-state-item-count">15</span>
                <span class="site-state-item-name">日志</span>
              </a>
            </div>
          

          

          
            
            
            <div class="site-state-item site-state-tags">
              <a href="/tags/index.html">
                <span class="site-state-item-count">25</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        

        


      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#JavaScript-ES6-开发规范"><span class="nav-number">1.</span> <span class="nav-text">JavaScript(ES6) 开发规范</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#目录"><span class="nav-number">1.1.</span> <span class="nav-text">目录</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#类型"><span class="nav-number">1.2.</span> <span class="nav-text">类型</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#引用"><span class="nav-number">1.3.</span> <span class="nav-text">引用</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#对象"><span class="nav-number">1.4.</span> <span class="nav-text">对象</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#数组"><span class="nav-number">1.5.</span> <span class="nav-text">数组</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#解构"><span class="nav-number">1.6.</span> <span class="nav-text">解构</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#字符串"><span class="nav-number">1.7.</span> <span class="nav-text">字符串</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#函数"><span class="nav-number">1.8.</span> <span class="nav-text">函数</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#箭头函数"><span class="nav-number">1.9.</span> <span class="nav-text">箭头函数</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Classes-amp-Contstructors"><span class="nav-number">1.10.</span> <span class="nav-text">Classes & Contstructors</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#模块"><span class="nav-number">1.11.</span> <span class="nav-text">模块</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#迭代器和生成器"><span class="nav-number">1.12.</span> <span class="nav-text">迭代器和生成器</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#属性"><span class="nav-number">1.13.</span> <span class="nav-text">属性</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#变量"><span class="nav-number">1.14.</span> <span class="nav-text">变量</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#提升"><span class="nav-number">1.15.</span> <span class="nav-text">提升</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#比较运算符和相等"><span class="nav-number">1.16.</span> <span class="nav-text">比较运算符和相等</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#块"><span class="nav-number">1.17.</span> <span class="nav-text">块</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#控制语句"><span class="nav-number">1.18.</span> <span class="nav-text">控制语句</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#注释"><span class="nav-number">1.19.</span> <span class="nav-text">注释</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#空白"><span class="nav-number">1.20.</span> <span class="nav-text">空白</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#逗号"><span class="nav-number">1.21.</span> <span class="nav-text">逗号</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#分号"><span class="nav-number">1.22.</span> <span class="nav-text">分号</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#类型强制转换"><span class="nav-number">1.23.</span> <span class="nav-text">类型强制转换</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#命名规则"><span class="nav-number">1.24.</span> <span class="nav-text">命名规则</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#访问器"><span class="nav-number">1.25.</span> <span class="nav-text">访问器</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#事件"><span class="nav-number">1.26.</span> <span class="nav-text">事件</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#参考"><span class="nav-number">1.27.</span> <span class="nav-text">参考</span></a></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">梦</span>
</div>


<div class="powered-by">
  由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Muse
  </a>
</div>


        

        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.1"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.1"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.1"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.1"></script>



  


  




	





  





  





  






  





  

  

  

  

  

  

</body>
</html>
